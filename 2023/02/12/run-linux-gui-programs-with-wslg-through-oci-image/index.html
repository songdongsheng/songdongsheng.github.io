<!DOCTYPE html>
<html lang=zh>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="keywords" content="">
  
    <link rel="icon" href="">
  
    
  <title>Run Linux GUI Programs With WSLg Through OCI Image | 上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</title>
  <meta name="description" content="">
  
<link rel="stylesheet" href="/style.css">

  
<link rel="stylesheet" href="/lib/jquery.fancybox.min.css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
      <section class="content markdown-body">
        <h1>
          Run Linux GUI Programs With WSLg Through OCI Image
        </h1>
        <div class='post-meta'>
          <i class="fa fa-calendar"
            aria-hidden="true"></i> <time>
            2023/02/12</time>
          
          | <i class="fa fa-folder-open-o"
            aria-hidden="true"></i>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/Operating-system/">Operating system</a>
  </div>



          
          
          |
          
          <i class="fa fa-tags"
            aria-hidden="true"></i>
          
          
  <a href="/tags/#Windows" class='tag'>Windows</a>

  <a href="/tags/#Linux" class='tag'>Linux</a>


          
        </div>
        <h1 id="Run-Linux-GUI-Programs-With-WSLg-Through-OCI-Image"><a href="#Run-Linux-GUI-Programs-With-WSLg-Through-OCI-Image" class="headerlink" title="Run Linux GUI Programs With WSLg Through OCI Image"></a>Run Linux GUI Programs With WSLg Through OCI Image</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/microsoft/wslg">Windows Subsystem for Linux GUI</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/microsoft/WSL/issues/9025">mounting of &#x2F;mnt&#x2F;wslg as user runtime dir breaks all users except that with uid&#x3D;1000</a></li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/tutorials/gui-apps">Run Linux GUI apps with WSL</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Fcitx5">Fcitx5</a></li>
<li><a target="_blank" rel="noopener" href="https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/x86_64/alpine-minirootfs-3.17.2-x86_64.tar.gz">Alpine Linux 3.17 - 3M</a></li>
<li><a target="_blank" rel="noopener" href="https://partner-images.canonical.com/oci/focal/current/ubuntu-focal-oci-amd64-root.tar.gz">Ubuntu 20.04 OCI - 28MB</a></li>
<li><a target="_blank" rel="noopener" href="https://partner-images.canonical.com/oci/jammy/current/ubuntu-jammy-oci-amd64-root.tar.gz">Ubuntu 22.04 OCI - 30MB</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/debuerreotype/docker-debian-artifacts/raw/dist-amd64/bullseye/rootfs.tar.xz">Debian 11 - 33MB</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/debuerreotype/docker-debian-artifacts/raw/dist-amd64/bookworm/rootfs.tar.xz">Debian 12 - 30MB</a></li>
</ul>
<h2 id="Install-WSL2"><a href="#Install-WSL2" class="headerlink" title="Install WSL2"></a>Install WSL2</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; wsl --list --online</span><br><span class="line">The following is a list of valid distributions that can be installed.</span><br><span class="line">Install using &#x27;wsl.exe --install &lt;Distro&gt;&#x27;.</span><br><span class="line"></span><br><span class="line">NAME                                   FRIENDLY NAME</span><br><span class="line">Ubuntu                                 Ubuntu</span><br><span class="line">Debian                                 Debian GNU/Linux</span><br><span class="line">kali-linux                             Kali Linux Rolling</span><br><span class="line">Ubuntu-18.04                           Ubuntu 18.04 LTS</span><br><span class="line">Ubuntu-20.04                           Ubuntu 20.04 LTS</span><br><span class="line">Ubuntu-22.04                           Ubuntu 22.04 LTS</span><br><span class="line">OracleLinux_8_5                        Oracle Linux 8.5</span><br><span class="line">OracleLinux_7_9                        Oracle Linux 7.9</span><br><span class="line">SUSE-Linux-Enterprise-Server-15-SP4    SUSE Linux Enterprise Server 15 SP4</span><br><span class="line">openSUSE-Leap-15.4                     openSUSE Leap 15.4</span><br><span class="line">openSUSE-Tumbleweed                    openSUSE Tumbleweed</span><br><span class="line"></span><br><span class="line">PS C:\&gt; wsl --install Debian</span><br><span class="line">PS C:\&gt; wsl --install Ubuntu</span><br><span class="line">PS C:\&gt; wsl --install Ubuntu-22.04</span><br><span class="line">PS C:\&gt; wsl --install openSUSE-Leap-15.4</span><br></pre></td></tr></table></figure>

<h2 id="Attaches-and-mounts-disk-in-all-WSL2-distributions"><a href="#Attaches-and-mounts-disk-in-all-WSL2-distributions" class="headerlink" title="Attaches and mounts disk in all WSL2 distributions"></a>Attaches and mounts disk in all WSL2 distributions</h2><h3 id="Create-Virtual-Disk"><a href="#Create-Virtual-Disk" class="headerlink" title="Create Virtual Disk"></a>Create Virtual Disk</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -f qcow2 -o compression_type=zstd share-disk.qcow2 64G</span><br><span class="line">qemu-img info share-disk.qcow2</span><br><span class="line"></span><br><span class="line">qemu-img create -f vhdx share-disk.vhdx 64G</span><br><span class="line">qemu-img info share-disk.vhdx</span><br></pre></td></tr></table></figure>


<h3 id="Mount-Virtual-Disk-Windows"><a href="#Mount-Virtual-Disk-Windows" class="headerlink" title="Mount Virtual Disk - Windows"></a>Mount Virtual Disk - Windows</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl --unmount share-disk.vhdx</span><br><span class="line"></span><br><span class="line">wsl --mount --vhd share-disk.vhdx</span><br></pre></td></tr></table></figure>

<h3 id="Mount-Virtual-Disk-Linux"><a href="#Mount-Virtual-Disk-Linux" class="headerlink" title="Mount Virtual Disk - Linux"></a>Mount Virtual Disk - Linux</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># gdisk -l /dev/sde</span><br><span class="line">GPT fdisk (gdisk) version 1.0.8</span><br><span class="line"></span><br><span class="line">Partition table scan:</span><br><span class="line">  MBR: not present</span><br><span class="line">  BSD: not present</span><br><span class="line">  APM: not present</span><br><span class="line">  GPT: not present</span><br><span class="line"></span><br><span class="line">Creating new GPT entries in memory.</span><br><span class="line">Disk /dev/sde: 2147483648 sectors, 1024.0 GiB</span><br><span class="line">Model: Virtual Disk</span><br><span class="line">Sector size (logical/physical): 512/4096 bytes</span><br><span class="line">Disk identifier (GUID): B38F5AE6-9ED7-4C65-9F21-6A9206A5AD7D</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">Main partition table begins at sector 2 and ends at sector 33</span><br><span class="line">First usable sector is 34, last usable sector is 2147483614</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 2147483581 sectors (1024.0 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># mount /dev/sde /mnt/Debian-12-ext4</span><br><span class="line"># cd /mnt/Debian-12-ext4</span><br><span class="line"># ls -ln</span><br><span class="line">total 76</span><br><span class="line">lrwxrwxrwx  1 0 0     7 Feb  8 13:00 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Oct  3 21:30 boot</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Feb  8 13:00 dev</span><br><span class="line">drwxr-xr-x 29 0 0  4096 Feb 12 08:53 etc</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Oct  3 21:30 home</span><br><span class="line">-rwxr-xr-x  1 0 0     0 Feb 12 08:53 init</span><br><span class="line">lrwxrwxrwx  1 0 0     7 Feb  8 13:00 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx  1 0 0     9 Feb  8 13:00 lib32 -&gt; usr/lib32</span><br><span class="line">lrwxrwxrwx  1 0 0     9 Feb  8 13:00 lib64 -&gt; usr/lib64</span><br><span class="line">lrwxrwxrwx  1 0 0    10 Feb  8 13:00 libx32 -&gt; usr/libx32</span><br><span class="line">drwx------  2 0 0 16384 Feb 12 08:53 lost+found</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Feb  8 13:00 media</span><br><span class="line">drwxr-xr-x  5 0 0  4096 Feb 12 08:53 mnt</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Feb  8 13:00 opt</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Oct  3 21:30 proc</span><br><span class="line">drwx------  2 0 0  4096 Feb 12 08:54 root</span><br><span class="line">drwxr-xr-x  3 0 0  4096 Feb  8 13:00 run</span><br><span class="line">lrwxrwxrwx  1 0 0     8 Feb  8 13:00 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Feb  8 13:00 srv</span><br><span class="line">drwxr-xr-x  2 0 0  4096 Oct  3 21:30 sys</span><br><span class="line">drwxrwxrwt  3 0 0  4096 Feb 12 08:53 tmp</span><br><span class="line">drwxr-xr-x 14 0 0  4096 Feb  8 13:00 usr</span><br><span class="line">drwxr-xr-x 11 0 0  4096 Feb  8 13:00 var</span><br><span class="line"></span><br><span class="line"># dmesg</span><br><span class="line">...</span><br><span class="line">[ 3286.554788] scsi 0:0:0:4: Direct-Access     Msft     Virtual Disk     1.0  PQ: 0 ANSI: 5</span><br><span class="line">[ 3286.558599] sd 0:0:0:4: Attached scsi generic sg4 type 0</span><br><span class="line">[ 3286.559426] sd 0:0:0:4: [sde] 2147483648 512-byte logical blocks: (1.10 TB/1.00 TiB)</span><br><span class="line">[ 3286.560482] sd 0:0:0:4: [sde] 4096-byte physical blocks</span><br><span class="line">[ 3286.561402] sd 0:0:0:4: [sde] Write Protect is off</span><br><span class="line">[ 3286.562124] sd 0:0:0:4: [sde] Mode Sense: 0f 00 00 00</span><br><span class="line">[ 3286.563161] sd 0:0:0:4: [sde] Write cache: enabled, read cache: enabled, doesn&#x27;t support DPO or FUA</span><br><span class="line">[ 3286.565743] sd 0:0:0:4: [sde] Attached SCSI disk</span><br><span class="line">[ 3286.578015] WSL (397): Detected ext4 filesystem for device: /dev/sde</span><br><span class="line">[ 3286.614048] EXT4-fs (sde): mounted filesystem with ordered data mode. Quota mode: none.</span><br></pre></td></tr></table></figure>

<h2 id="Debian-12"><a href="#Debian-12" class="headerlink" title="Debian 12"></a>Debian 12</h2><h3 id="Import-Debian-Image"><a href="#Import-Debian-Image" class="headerlink" title="Import Debian Image"></a>Import Debian Image</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L -o debian-minirootfs-12-x86_64.tar.gz https://github.com/debuerreotype/docker-debian-artifacts/raw/dist-amd64/bookworm/rootfs.tar.xz</span><br><span class="line">wsl --import Debian-12 . debian-minirootfs-12-x86_64.tar.gz</span><br><span class="line">wsl -d Debian-12</span><br></pre></td></tr></table></figure>

<h3 id="Setup-Debian"><a href="#Setup-Debian" class="headerlink" title="Setup Debian"></a>Setup Debian</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">libsystemd0-249.14-150400.8.19.1.x86_64</span><br><span class="line">    /usr/lib64/libsystemd.so.0</span><br><span class="line">    /usr/lib64/libsystemd.so.0.32.0</span><br><span class="line"></span><br><span class="line">systemd-249.14-150400.8.19.1.x86_64</span><br><span class="line">    /bin/systemctl</span><br><span class="line">    /usr/bin/bootctl</span><br><span class="line">    /usr/bin/busctl</span><br><span class="line">    /usr/bin/hostnamectl</span><br><span class="line">    /usr/bin/journalctl</span><br><span class="line">    /usr/bin/kernel-install</span><br><span class="line">    /usr/bin/localectl</span><br><span class="line">    /usr/bin/loginctl</span><br><span class="line">    /usr/bin/systemctl</span><br><span class="line">    /usr/bin/timedatectl</span><br><span class="line">util-linux-systemd-2.37.2-150400.8.14.1.x86_64</span><br><span class="line">    /usr/bin/logger</span><br><span class="line">    /usr/bin/lslogins</span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF | tee /etc/wsl.conf</span><br><span class="line">[boot]</span><br><span class="line">systemd=true</span><br><span class="line"></span><br><span class="line">[network]</span><br><span class="line">generateResolvConf = false</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">rm -fr /etc/resolv.conf &amp;&amp; cat &lt;&lt; EOF | tee /etc/resolv.conf</span><br><span class="line">nameserver 193.181.14.10</span><br><span class="line">nameserver 193.181.14.11</span><br><span class="line">nameserver 193.181.14.12</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">chattr +iS /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF | tee ~/.vimrc</span><br><span class="line">set ignorecase</span><br><span class="line">set nocompatible</span><br><span class="line">set showcmd</span><br><span class="line"></span><br><span class="line">syntax on</span><br><span class="line">set nowrap</span><br><span class="line">set autoindent</span><br><span class="line">set nu</span><br><span class="line">set paste</span><br><span class="line">set mouse-=a</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade -y --no-install-recommends; \</span><br><span class="line">apt install -y --no-install-recommends locales whiptail</span><br><span class="line"></span><br><span class="line">dpkg-reconfigure locales</span><br><span class="line"></span><br><span class="line">apt install -y --no-install-recommends \</span><br><span class="line">    adwaita-icon-theme \</span><br><span class="line">    at-spi2-core \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    emacs-gtk \</span><br><span class="line">    gedit \</span><br><span class="line">    greybird-gtk-theme \</span><br><span class="line">    librsvg2-2 \</span><br><span class="line">    mesa-utils \</span><br><span class="line">    ukui-themes \</span><br><span class="line">    vim-gtk3 \</span><br><span class="line">    wayland-utils \</span><br><span class="line">    weston</span><br></pre></td></tr></table></figure>

<h3 id="Font-Configuration"><a href="#Font-Configuration" class="headerlink" title="Font Configuration"></a>Font Configuration</h3><p>Let’s add the Windows fonts &amp; disabling bitmap fonts first.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fc-list &#x27;:&#x27; file | sort</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fonts/fonts.conf</span><br><span class="line"></span><br><span class="line">    &lt;!-- add Windows fonts --&gt;</span><br><span class="line">    &lt;dir&gt;/mnt/c/Windows/Fonts/&lt;/dir&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dir&gt;/usr/share/fonts&lt;/dir&gt;</span><br><span class="line">    &lt;dir prefix=&quot;xdg&quot;&gt;fonts&lt;/dir&gt;</span><br><span class="line"></span><br><span class="line">    &lt;cachedir&gt;/var/cache/fontconfig&lt;/cachedir&gt;</span><br><span class="line">    &lt;cachedir prefix=&quot;xdg&quot;&gt;fontconfig&lt;/cachedir&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;selectfont&gt;</span><br><span class="line">        &lt;rejectfont&gt;</span><br><span class="line">            &lt;pattern&gt;</span><br><span class="line">                &lt;patelt name=&quot;scalable&quot;&gt;&lt;bool&gt;false&lt;/bool&gt;&lt;/patelt&gt;</span><br><span class="line">            &lt;/pattern&gt;</span><br><span class="line">        &lt;/rejectfont&gt;</span><br><span class="line">    &lt;/selectfont&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">    vi /etc/fonts/fonts.conf</span><br><span class="line">    XMLLINT_INDENT=&quot;    &quot; xmllint \-\-format /etc/fonts/fonts.conf</span><br><span class="line">    https://www.freedesktop.org/software/fontconfig/fontconfig-user.html</span><br><span class="line">  --&gt;</span><br><span class="line">&lt;fontconfig&gt;</span><br><span class="line">    &lt;dir&gt;/usr/share/fonts&lt;/dir&gt;</span><br><span class="line">    &lt;dir prefix=&quot;xdg&quot;&gt;fonts&lt;/dir&gt;</span><br><span class="line">    &lt;dir&gt;/mnt/c/Windows/Fonts/&lt;/dir&gt;</span><br><span class="line"></span><br><span class="line">    &lt;cachedir&gt;/var/cache/fontconfig&lt;/cachedir&gt;</span><br><span class="line">    &lt;cachedir prefix=&quot;xdg&quot;&gt;fontconfig&lt;/cachedir&gt;</span><br><span class="line"></span><br><span class="line">    &lt;config&gt;</span><br><span class="line">        &lt;rescan&gt;</span><br><span class="line">            &lt;int&gt;30&lt;/int&gt;</span><br><span class="line">        &lt;/rescan&gt;</span><br><span class="line">    &lt;/config&gt;</span><br><span class="line"></span><br><span class="line">    &lt;selectfont&gt;</span><br><span class="line">        &lt;rejectfont&gt;</span><br><span class="line">            &lt;pattern&gt;</span><br><span class="line">                &lt;patelt name=&quot;scalable&quot;&gt;</span><br><span class="line">                    &lt;bool&gt;false&lt;/bool&gt;</span><br><span class="line">                &lt;/patelt&gt;</span><br><span class="line">            &lt;/pattern&gt;</span><br><span class="line">        &lt;/rejectfont&gt;</span><br><span class="line">    &lt;/selectfont&gt;</span><br><span class="line"></span><br><span class="line">    &lt;match target=&quot;pattern&quot;&gt;</span><br><span class="line">        &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;</span><br><span class="line">            &lt;string&gt;mono&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&gt;</span><br><span class="line">            &lt;string&gt;monospace&lt;/string&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line"></span><br><span class="line">    &lt;match target=&quot;pattern&quot;&gt;</span><br><span class="line">        &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line"></span><br><span class="line">    &lt;match target=&quot;pattern&quot;&gt;</span><br><span class="line">        &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans serif&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line"></span><br><span class="line">    &lt;match target=&quot;pattern&quot;&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">            &lt;string&gt;serif&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">            &lt;string&gt;monospace&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;edit name=&quot;family&quot; mode=&quot;append_last&quot;&gt;</span><br><span class="line">            &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line"></span><br><span class="line">    &lt;match target=&quot;font&quot; &gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;autohint&quot;&gt;  &lt;bool&gt;false&lt;/bool&gt;&lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hinting&quot;&gt;   &lt;bool&gt;true&lt;/bool&gt;&lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hintstyle&quot;&gt; &lt;const&gt;hintslight&lt;/const&gt;&lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;antialias&quot;&gt; &lt;bool&gt;true&lt;/bool&gt;&lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;lcdfilter&quot;&gt; &lt;const&gt;lcddefault&lt;/const&gt;&lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;rgba&quot;&gt;      &lt;const&gt;rgb&lt;/const&gt;&lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line"></span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Helvetica&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Myriad Pro&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Calibri&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Verdana&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Pi Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Symbol Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Cambria Math&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft YaHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft JhengHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;SimHei&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;NSimSun&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;SimSun-ExtB&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Fan Heiti Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Heiti Std&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line"></span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;serif&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Times New Roman&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Minion Pro&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Cambria&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Georgia&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Pi Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Symbol Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Cambria Math&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft YaHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft JhengHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;NSimSun&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;SimSun\-ExtB&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Ming Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Song Std&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line"></span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;monospace&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;JetBrains Mono&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Consolas&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Courier Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Courier New&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Pi Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Symbol Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Cambria Math&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft YaHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Microsoft JhengHei Light&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;NSimSun&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;SimSun-ExtB&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Ming Std&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Adobe Song Std&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">&lt;/fontconfig&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fc-cache -rv</span><br><span class="line"></span><br><span class="line">fc-match -s &#x27;monospace&#x27; | head</span><br><span class="line">fc-match -s &#x27;serif&#x27; | head</span><br><span class="line">fc-match -s &#x27;sans-serif&#x27; | head</span><br></pre></td></tr></table></figure>

<h3 id="Wayland-Information"><a href="#Wayland-Information" class="headerlink" title="Wayland Information"></a>Wayland Information</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glxinfo -B</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># wayland-info || weston-info</span><br><span class="line">interface: &#x27;wl_compositor&#x27;,                              version:  4, name:  1</span><br><span class="line">interface: &#x27;wl_subcompositor&#x27;,                           version:  1, name:  2</span><br><span class="line">interface: &#x27;wp_viewporter&#x27;,                              version:  1, name:  3</span><br><span class="line">interface: &#x27;zxdg_output_manager_v1&#x27;,                     version:  2, name:  4</span><br><span class="line">        xdg_output_v1</span><br><span class="line">                output: 21</span><br><span class="line">                name: &#x27;rdp-2&#x27;</span><br><span class="line">                logical_x: 1920, logical_y: 0</span><br><span class="line">                logical_width: 1920, logical_height: 1080</span><br><span class="line">        xdg_output_v1</span><br><span class="line">                output: 11</span><br><span class="line">                name: &#x27;rdp-0&#x27;</span><br><span class="line">                logical_x: 0, logical_y: 0</span><br><span class="line">                logical_width: 1920, logical_height: 1080</span><br><span class="line">interface: &#x27;wp_presentation&#x27;,                            version:  1, name:  5</span><br><span class="line">        presentation clock id: 4 (CLOCK_MONOTONIC_RAW)</span><br><span class="line">interface: &#x27;zwp_relative_pointer_manager_v1&#x27;,            version:  1, name:  6</span><br><span class="line">interface: &#x27;zwp_pointer_constraints_v1&#x27;,                 version:  1, name:  7</span><br><span class="line">interface: &#x27;zwp_input_timestamps_manager_v1&#x27;,            version:  1, name:  8</span><br><span class="line">interface: &#x27;wl_data_device_manager&#x27;,                     version:  3, name:  9</span><br><span class="line">interface: &#x27;wl_shm&#x27;,                                     version:  1, name: 10</span><br><span class="line">        formats (fourcc):</span><br><span class="line">        0x36314752 = &#x27;RG16&#x27;</span><br><span class="line">                 1 = &#x27;XR24&#x27;</span><br><span class="line">                 0 = &#x27;AR24&#x27;</span><br><span class="line">interface: &#x27;wl_output&#x27;,                                  version:  3, name: 11</span><br><span class="line">        x: 0, y: 0, scale: 1,</span><br><span class="line">        physical_width: 0 mm, physical_height: 0 mm,</span><br><span class="line">        make: &#x27;weston&#x27;, model: &#x27;rdp&#x27;,</span><br><span class="line">        subpixel_orientation: unknown, output_transform: normal,</span><br><span class="line">        mode:</span><br><span class="line">                width: 1920 px, height: 1080 px, refresh: 60.000 Hz,</span><br><span class="line">                flags: current preferred</span><br><span class="line">interface: &#x27;zwp_input_panel_v1&#x27;,                         version:  1, name: 12</span><br><span class="line">interface: &#x27;zwp_text_input_manager_v1&#x27;,                  version:  1, name: 13</span><br><span class="line">interface: &#x27;xdg_wm_base&#x27;,                                version:  1, name: 14</span><br><span class="line">interface: &#x27;zxdg_shell_v6&#x27;,                              version:  1, name: 15</span><br><span class="line">interface: &#x27;wl_shell&#x27;,                                   version:  1, name: 16</span><br><span class="line">interface: &#x27;weston_rdprail_shell&#x27;,                       version:  1, name: 17</span><br><span class="line">interface: &#x27;weston_screenshooter&#x27;,                       version:  1, name: 18</span><br><span class="line">interface: &#x27;wl_seat&#x27;,                                    version:  7, name: 19</span><br><span class="line">        name: RDP CN-00124803</span><br><span class="line">        capabilities: pointer keyboard</span><br><span class="line">        keyboard repeat rate: 40</span><br><span class="line">        keyboard repeat delay: 400</span><br><span class="line">interface: &#x27;zwp_input_method_v1&#x27;,                        version:  1, name: 20</span><br><span class="line">interface: &#x27;wl_output&#x27;,                                  version:  3, name: 21</span><br><span class="line">        x: 1920, y: 0, scale: 1,</span><br><span class="line">        physical_width: 508 mm, physical_height: 286 mm,</span><br><span class="line">        make: &#x27;weston&#x27;, model: &#x27;rdp&#x27;,</span><br><span class="line">        subpixel_orientation: unknown, output_transform: normal,</span><br><span class="line">        mode:</span><br><span class="line">                width: 1920 px, height: 1080 px, refresh: 60.000 Hz,</span><br><span class="line">                flags: current preferred</span><br></pre></td></tr></table></figure>

<h3 id="Weston-Compositor"><a href="#Weston-Compositor" class="headerlink" title="Weston Compositor"></a>Weston Compositor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.config/ &amp;&amp; vi ~/.config/weston.ini</span><br><span class="line">[libinput]</span><br><span class="line">enable-tap=true</span><br><span class="line"></span><br><span class="line">[shell]</span><br><span class="line">cursor-theme=Adwaita</span><br><span class="line">cursor-size=24</span><br><span class="line"></span><br><span class="line">[terminal]</span><br><span class="line">font=monospace</span><br><span class="line">font-size=18</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">name=rdp-0</span><br><span class="line">scale=2</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">name=rdp-2</span><br><span class="line">scale=3</span><br></pre></td></tr></table></figure>

<h3 id="GTK-with-HiDPI"><a href="#GTK-with-HiDPI" class="headerlink" title="GTK with HiDPI"></a>GTK with HiDPI</h3><ol>
<li><a target="_blank" rel="noopener" href="https://docs.gtk.org/gtk3/x11.html">https://docs.gtk.org/gtk3/x11.html</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.gtk.org/gtk4/x11.html">https://docs.gtk.org/gtk4/x11.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.qt.io/blog/2016/01/26/high-dpi-support-in-qt-5-6">https://www.qt.io/blog/2016/01/26/high-dpi-support-in-qt-5-6</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/HiDPI">https://wiki.archlinux.org/title/HiDPI</a></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line"></span><br><span class="line">GDK_SCALE=1.7 GDK_DPI_SCALE=1.7 GTK_THEME=Adwaita emacs</span><br><span class="line">GDK_SCALE=1.7 GDK_DPI_SCALE=1.7 GTK_THEME=Greybird emacs</span><br></pre></td></tr></table></figure>

<h3 id="fcitx"><a href="#fcitx" class="headerlink" title="fcitx"></a>fcitx</h3><h4 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y --no-install-recommends \</span><br><span class="line">    fcitx \</span><br><span class="line">    fcitx-config-gtk \</span><br><span class="line">    fcitx-frontend-gtk2 \</span><br><span class="line">    fcitx-frontend-gtk3 \</span><br><span class="line">    fcitx-libpinyin \</span><br><span class="line">    fcitx-module-dbus \</span><br><span class="line">    fcitx-module-x11 \</span><br><span class="line">    fcitx-rime \</span><br><span class="line">    fcitx-table-emoji \</span><br><span class="line">    fcitx-table-latex \</span><br><span class="line">    fcitx-table-wbpy \</span><br><span class="line">    fcitx-ui-classic</span><br><span class="line"></span><br><span class="line">apt-get install -y --no-install-recommends \</span><br><span class="line">    rime-data-emoji \</span><br><span class="line">    rime-data-luna-pinyin \</span><br><span class="line">    rime-data-terra-pinyin \</span><br><span class="line">    rime-data-wubi</span><br><span class="line"></span><br><span class="line">export GTK_IM_MODULE=fcitx</span><br><span class="line">export QT_IM_MODULE=fcitx</span><br><span class="line">export XMODIFIERS=@im=fcitx</span><br><span class="line"></span><br><span class="line">fcitx-autostart</span><br><span class="line">fcitx-config-gtk3</span><br><span class="line"></span><br><span class="line">CTRL + ALT: Trigger input method</span><br><span class="line">SPACE:      Toggle English and input method</span><br><span class="line">CTRL + SHIFT: switch input method</span><br></pre></td></tr></table></figure>

<h4 id="Daily-Usage"><a href="#Daily-Usage" class="headerlink" title="Daily Usage"></a>Daily Usage</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export GTK_IM_MODULE=fcitx</span><br><span class="line">export QT_IM_MODULE=fcitx</span><br><span class="line">export XMODIFIERS=@im=fcitx</span><br><span class="line"></span><br><span class="line">fcitx-autostart</span><br></pre></td></tr></table></figure>

<h3 id="ibus"><a href="#ibus" class="headerlink" title="ibus"></a>ibus</h3><h4 id="Installation-1"><a href="#Installation-1" class="headerlink" title="Installation"></a>Installation</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y --no-install-recommends \</span><br><span class="line">    ibus \</span><br><span class="line">    ibus-gtk \</span><br><span class="line">    ibus-gtk3 \</span><br><span class="line">    ibus-gtk4 \</span><br><span class="line">    ibus-input-pad \</span><br><span class="line">    ibus-libpinyin \</span><br><span class="line">    ibus-rime \</span><br><span class="line">    ibus-table-emoji \</span><br><span class="line">    ibus-table-latex \</span><br><span class="line">    ibus-wayland \</span><br><span class="line">    rime-data-emoji \</span><br><span class="line">    rime-data-luna-pinyin \</span><br><span class="line">    rime-data-terra-pinyin</span><br><span class="line"></span><br><span class="line">unset XDG_RUNTIME_DIR</span><br><span class="line">export QT_IM_MODULE=ibus</span><br><span class="line">export GTK_IM_MODULE=ibus</span><br><span class="line">export XMODIFIERS=@im=ibus</span><br><span class="line"></span><br><span class="line">dbus-launch ibus-daemon -drx</span><br><span class="line"></span><br><span class="line">dbus-launch ibus-setup</span><br><span class="line"></span><br><span class="line">pkill ibus-daemon</span><br><span class="line">dbus-launch ibus-daemon -drx</span><br></pre></td></tr></table></figure>

<h4 id="Daily-Usage-1"><a href="#Daily-Usage-1" class="headerlink" title="Daily Usage"></a>Daily Usage</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">unset XDG_RUNTIME_DIR</span><br><span class="line">export QT_IM_MODULE=ibus</span><br><span class="line">export GTK_IM_MODULE=ibus</span><br><span class="line">export XMODIFIERS=@im=ibus</span><br><span class="line"></span><br><span class="line">ibus-daemon -drx</span><br><span class="line"></span><br><span class="line">Press Ctrl + space on Windows virtual keyboard can switch ibus input methods.</span><br></pre></td></tr></table></figure>

<h2 id="Ubuntu-22-04"><a href="#Ubuntu-22-04" class="headerlink" title="Ubuntu 22.04"></a>Ubuntu 22.04</h2><h3 id="Create-WSL-Distribution-From-RootFs"><a href="#Create-WSL-Distribution-From-RootFs" class="headerlink" title="Create WSL Distribution From RootFs"></a>Create WSL Distribution From RootFs</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://partner-images.canonical.com/oci/jammy/current/ubuntu-jammy-oci-amd64-root.tar.gz</span><br><span class="line">wsl --import Ubuntu-22.04 . ubuntu-jammy-oci-amd64-root.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="Sets-a-Distribution-as-Default"><a href="#Sets-a-Distribution-as-Default" class="headerlink" title="Sets a Distribution as Default"></a>Sets a Distribution as Default</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; wsl -s Ubuntu-22.04</span><br><span class="line">PS C:\&gt; wsl --list -v</span><br><span class="line">  NAME            STATE           VERSION</span><br><span class="line">* Ubuntu-22.04    Stopped         2</span><br><span class="line">  sles-15         Stopped         2</span><br><span class="line">  sles-12         Stopped         2</span><br></pre></td></tr></table></figure>

<h3 id="Use-Environment-Variables"><a href="#Use-Environment-Variables" class="headerlink" title="Use Environment Variables"></a>Use Environment Variables</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DISPLAY=:0</span><br><span class="line">GPG_TTY=/dev/pts/0</span><br><span class="line">HOSTTYPE=x86_64</span><br><span class="line">LS_OPTIONS=-N --color=tty -T 0</span><br><span class="line">PULSE_SERVER=/mnt/wslg/PulseServer</span><br><span class="line">TERM=xterm-256color</span><br><span class="line">WAYLAND_DISPLAY=wayland-0</span><br><span class="line">WSL2_GUI_APPS_ENABLED=1</span><br><span class="line">WSL_DISTRO_NAME=Ubuntu-22.04</span><br><span class="line"></span><br><span class="line">alias beep=&#x27;echo -en &quot;\007&quot;&#x27;</span><br><span class="line">alias ip=&#x27;ip --color=auto&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~&gt; type _ls</span><br><span class="line">_ls is a function</span><br><span class="line">_ls ()</span><br><span class="line">&#123;</span><br><span class="line">    local IFS=&#x27; &#x27;;</span><br><span class="line">    command ls $LS_OPTIONS $&#123;1+&quot;$@&quot;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Update-DNS-Configuration"><a href="#Update-DNS-Configuration" class="headerlink" title="Update DNS Configuration"></a>Update DNS Configuration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wsl -d Ubuntu-22.04</span><br><span class="line"></span><br><span class="line">cat &lt;&lt; EOF | tee /etc/wsl.conf</span><br><span class="line">[network]</span><br><span class="line">generateResolvConf = false</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">rm -fr /etc/resolv.conf &amp;&amp; cat &lt;&lt; EOF | tee /etc/resolv.conf</span><br><span class="line">nameserver 193.181.14.10</span><br><span class="line">nameserver 193.181.14.11</span><br><span class="line">nameserver 193.181.14.12</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">chattr +iS /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<h3 id="Configure-Locales"><a href="#Configure-Locales" class="headerlink" title="Configure Locales"></a>Configure Locales</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade -y --no-install-recommends; \</span><br><span class="line">apt install -y --no-install-recommends locales whiptail</span><br><span class="line"></span><br><span class="line"># locale -a</span><br><span class="line">C</span><br><span class="line">C.utf8</span><br><span class="line">POSIX</span><br><span class="line"></span><br><span class="line"># dpkg-reconfigure locales</span><br><span class="line">Generating locales (this might take a while)...</span><br><span class="line">  en_US.UTF-8... done</span><br><span class="line">  zh_CN.UTF-8... done</span><br><span class="line">Generation complete.</span><br></pre></td></tr></table></figure>

<h3 id="Update-VIM-Configuration"><a href="#Update-VIM-Configuration" class="headerlink" title="Update VIM Configuration"></a>Update VIM Configuration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF | tee ~/.vimrc</span><br><span class="line">set ignorecase</span><br><span class="line">set nocompatible</span><br><span class="line">set showcmd</span><br><span class="line"></span><br><span class="line">syntax on</span><br><span class="line">set nowrap</span><br><span class="line">set autoindent</span><br><span class="line">set nu</span><br><span class="line">set paste</span><br><span class="line">set mouse-=a</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="Create-User-uid-1000-issue"><a href="#Create-User-uid-1000-issue" class="headerlink" title="Create User (uid 1000 issue)"></a>Create User (uid 1000 issue)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount --bind /mnt/wslg/runtime-dir /run/user/$1</span><br><span class="line">umount /run/user/$1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y --no-install-recommends sudo vim</span><br><span class="line"></span><br><span class="line">groupadd -g 1000 dongsheng || addgroup -g 1000 dongsheng</span><br><span class="line">useradd -g dongsheng -G sudo -u 1000 -s /bin/bash -m dongsheng</span><br><span class="line"></span><br><span class="line"># id dongsheng</span><br><span class="line">uid=1000(dongsheng) gid=1000(dongsheng) groups=1000(dongsheng),27(sudo)</span><br><span class="line"></span><br><span class="line">vi /etc/sudoers</span><br><span class="line">    # User_List Host_List=Runas_Spec? Option_Spec* (Tag_Spec &#x27;:&#x27;)* command_list</span><br><span class="line">    %sudo   ALL=(ALL:ALL) ALL</span><br><span class="line">        -&gt;</span><br><span class="line">    %sudo   ALL=(ALL:ALL) NOPASSWD: ALL</span><br><span class="line">    %wheel  ALL=(ALL:ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>

<h3 id="Configure-Default-User"><a href="#Configure-Default-User" class="headerlink" title="Configure Default User"></a>Configure Default User</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; Get-ItemProperty Registry::HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Lxss\*\ DistributionName | Get-ItemProperty | Format-Table -Property DistributionName,Version,State,Flags,DefaultUid,BasePath</span><br><span class="line"></span><br><span class="line">DistributionName Version State Flags DefaultUid BasePath</span><br><span class="line">---------------- ------- ----- ----- ---------- --------</span><br><span class="line">Ubuntu-22.04           2     1    15          0 \\?\C:\opt\wsl2\scratch</span><br><span class="line">sles-15                2     1    15       1000 \\?\C:\opt\wsl2\sles-15</span><br><span class="line">sles-12                2     1    15          0 \\?\C:\opt\wsl2\sles-12</span><br><span class="line"></span><br><span class="line">Get-ItemProperty Registry::HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Lxss\*\ DistributionName | Where-Object -Property DistributionName -eq Ubuntu-22.04 | Set-ItemProperty -Name DefaultUid -Value 1000</span><br></pre></td></tr></table></figure>

<h3 id="Install-The-GUI-Editor-Program"><a href="#Install-The-GUI-Editor-Program" class="headerlink" title="Install The GUI Editor Program"></a>Install The GUI Editor Program</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y --no-install-recommends adwaita-icon-theme-full at-spi2-core dbus-x11 emacs-gtk gedit</span><br></pre></td></tr></table></figure>

<h3 id="GTK-Configuration"><a href="#GTK-Configuration" class="headerlink" title="GTK Configuration"></a>GTK Configuration</h3><h4 id="GTK-2"><a href="#GTK-2" class="headerlink" title="GTK 2"></a>GTK 2</h4><p>GIMP (2.10.32) is the only useful GUI program that still uses GTK 2.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># vi ~/.gtkrc-2.0</span><br><span class="line"></span><br><span class="line">gtk-icon-theme-name = Adwaita</span><br><span class="line"># gtk-cursor-theme-size = 16</span><br><span class="line">gtk-font-name = &quot;sans-serif 16&quot;</span><br><span class="line">gtk-theme-name = Greybird</span><br></pre></td></tr></table></figure>

<h4 id="GTK-3"><a href="#GTK-3" class="headerlink" title="GTK 3"></a>GTK 3</h4><p>Most gnome programs now use GTK 3.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># mkdir -p  ~/.config/gtk-3.0/ &amp;&amp; vi ~/.config/gtk-3.0/settings.ini</span><br><span class="line"></span><br><span class="line">[Settings]</span><br><span class="line">gtk-cursor-theme-name = Adwaita</span><br><span class="line">gtk-cursor-theme-size = 16</span><br><span class="line"></span><br><span class="line">gtk-font-name = sans-serif 16</span><br><span class="line"></span><br><span class="line">gtk-icon-theme-name = Adwaita</span><br><span class="line">gtk-theme-name = Greybird</span><br><span class="line">gtk-key-theme-name = Emacs</span><br></pre></td></tr></table></figure>

<h4 id="GTK-4"><a href="#GTK-4" class="headerlink" title="GTK 4"></a>GTK 4</h4><p>Only a few gnome programs use GTK 4 today.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># mkdir -p  ~/.config/gtk-4.0/ &amp;&amp; vi ~/.config/gtk-4.0/settings.ini</span><br><span class="line"></span><br><span class="line">[Settings]</span><br><span class="line">gtk-cursor-theme-name = Adwaita</span><br><span class="line">gtk-cursor-theme-size = 16</span><br><span class="line"></span><br><span class="line">gtk-font-name = sans-serif 16</span><br><span class="line"></span><br><span class="line">gtk-icon-theme-name = Adwaita</span><br><span class="line">gtk-theme-name = Greybird</span><br><span class="line">gtk-key-theme-name = Emacs</span><br></pre></td></tr></table></figure>

<h3 id="wayland-info"><a href="#wayland-info" class="headerlink" title="wayland-info"></a>wayland-info</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">interface: &#x27;wl_compositor&#x27;, version: 4, name: 1</span><br><span class="line">interface: &#x27;wl_subcompositor&#x27;, version: 1, name: 2</span><br><span class="line">interface: &#x27;wp_viewporter&#x27;, version: 1, name: 3</span><br><span class="line">interface: &#x27;zxdg_output_manager_v1&#x27;, version: 2, name: 4</span><br><span class="line">        xdg_output_v1</span><br><span class="line">                output: 24</span><br><span class="line">                name: &#x27;rdp-5&#x27;</span><br><span class="line">                logical_x: 1920, logical_y: 0</span><br><span class="line">                logical_width: 1280, logical_height: 720</span><br><span class="line">        xdg_output_v1</span><br><span class="line">                output: 11</span><br><span class="line">                name: &#x27;rdp-0&#x27;</span><br><span class="line">                logical_x: 0, logical_y: 0</span><br><span class="line">                logical_width: 1920, logical_height: 1080</span><br><span class="line">interface: &#x27;wp_presentation&#x27;, version: 1, name: 5</span><br><span class="line">        presentation clock id: 4 (CLOCK_MONOTONIC_RAW)</span><br><span class="line">interface: &#x27;zwp_relative_pointer_manager_v1&#x27;, version: 1, name: 6</span><br><span class="line">interface: &#x27;zwp_pointer_constraints_v1&#x27;, version: 1, name: 7</span><br><span class="line">interface: &#x27;zwp_input_timestamps_manager_v1&#x27;, version: 1, name: 8</span><br><span class="line">interface: &#x27;wl_data_device_manager&#x27;, version: 3, name: 9</span><br><span class="line">interface: &#x27;wl_shm&#x27;, version: 1, name: 10</span><br><span class="line">        formats: RGB565 XRGB8888 ARGB8888</span><br><span class="line">interface: &#x27;wl_output&#x27;, version: 3, name: 11</span><br><span class="line">        x: 0, y: 0, scale: 1,</span><br><span class="line">        physical_width: 0 mm, physical_height: 0 mm,</span><br><span class="line">        make: &#x27;weston&#x27;, model: &#x27;rdp&#x27;,</span><br><span class="line">        subpixel_orientation: unknown, output_transform: normal,</span><br><span class="line">        mode:</span><br><span class="line">                width: 1920 px, height: 1080 px, refresh: 60.000 Hz,</span><br><span class="line">                flags: current preferred</span><br><span class="line">interface: &#x27;zwp_input_panel_v1&#x27;, version: 1, name: 12</span><br><span class="line">interface: &#x27;zwp_text_input_manager_v1&#x27;, version: 1, name: 13</span><br><span class="line">interface: &#x27;xdg_wm_base&#x27;, version: 1, name: 14</span><br><span class="line">interface: &#x27;zxdg_shell_v6&#x27;, version: 1, name: 15</span><br><span class="line">interface: &#x27;wl_shell&#x27;, version: 1, name: 16</span><br><span class="line">interface: &#x27;weston_rdprail_shell&#x27;, version: 1, name: 17</span><br><span class="line">interface: &#x27;weston_screenshooter&#x27;, version: 1, name: 18</span><br><span class="line">interface: &#x27;wl_seat&#x27;, version: 7, name: 19</span><br><span class="line">        name: RDP CN-00124803</span><br><span class="line">        capabilities: pointer keyboard</span><br><span class="line">        keyboard repeat rate: 40</span><br><span class="line">        keyboard repeat delay: 400</span><br><span class="line">interface: &#x27;zwp_input_method_v1&#x27;, version: 1, name: 20</span><br><span class="line">interface: &#x27;wl_output&#x27;, version: 3, name: 24</span><br><span class="line">        x: 1920, y: 0, scale: 3,</span><br><span class="line">        physical_width: 1110 mm, physical_height: 620 mm,</span><br><span class="line">        make: &#x27;weston&#x27;, model: &#x27;rdp&#x27;,</span><br><span class="line">        subpixel_orientation: unknown, output_transform: normal,</span><br><span class="line">        mode:</span><br><span class="line">                width: 3840 px, height: 2160 px, refresh: 60.000 Hz,</span><br><span class="line">                flags: current preferred</span><br></pre></td></tr></table></figure>

<h3 id="Font-Configuration-1"><a href="#Font-Configuration-1" class="headerlink" title="Font Configuration"></a>Font Configuration</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ fc-list | awk -F : &#x27;&#123; print $1&#125;&#x27; | sort -u</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSansMono-Bold.ttf</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSansMono.ttf</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSerif-Bold.ttf</span><br><span class="line">/usr/share/fonts/truetype/dejavu/DejaVuSerif.ttf</span><br></pre></td></tr></table></figure>

<h4 id="Add-Windows-Fonts"><a href="#Add-Windows-Fonts" class="headerlink" title="Add Windows Fonts"></a>Add Windows Fonts</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fonts/fonts.conf</span><br><span class="line">    &lt;dir&gt;/mnt/c/Windows/Fonts/&lt;/dir&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">fc-cache -rv</span><br><span class="line"></span><br><span class="line">fc-match -s &#x27;monospace&#x27; | head</span><br><span class="line">fc-match -s &#x27;serif&#x27; | head</span><br><span class="line">fc-match -s &#x27;sans-serif&#x27; | head</span><br><span class="line"></span><br><span class="line">Arial, Tahoma, Calibri, Segoe UI,</span><br><span class="line">Times New Roman, Cambria, Segoe UI Symbol, Segoe UI Emoji</span><br><span class="line">Consolas, Courier New, Segoe UI Symbol, Segoe UI Emoji</span><br><span class="line"></span><br><span class="line">Segoe UI Symbol</span><br><span class="line">Segoe UI Emoji</span><br><span class="line">Microsoft YaHei</span><br><span class="line">Microsoft JhengHei</span><br><span class="line"></span><br><span class="line">for range in $(fc-match --format=&#x27;%&#123;charset&#125;\n&#x27; &quot;Segoe UI Emoji&quot;); do</span><br><span class="line">    for n in $(seq &quot;0x$&#123;range%-*&#125;&quot; &quot;0x$&#123;range#*-&#125;&quot;); do</span><br><span class="line">        printf &quot;%04x\n&quot; &quot;$n&quot;;</span><br><span class="line">    done;</span><br><span class="line">done | while read -r n_hex; do</span><br><span class="line">    count=$((count + 1));</span><br><span class="line">    printf &quot;%-5s\U$n_hex\t&quot; &quot;$n_hex&quot;;</span><br><span class="line">    [ $((count % 10)) = 0 ] &amp;&amp; printf &quot;\n&quot;;</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Disable-Embedded-Bitmap-Fonts"><a href="#Disable-Embedded-Bitmap-Fonts" class="headerlink" title="Disable Embedded Bitmap Fonts"></a>Disable Embedded Bitmap Fonts</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;</span><br><span class="line">&lt;fontconfig&gt;</span><br><span class="line">  &lt;match target=&quot;font&quot;&gt;</span><br><span class="line">    &lt;edit name=&quot;embeddedbitmap&quot; mode=&quot;assign&quot;&gt;</span><br><span class="line">      &lt;bool&gt;false&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">  &lt;/match&gt;</span><br><span class="line">&lt;/fontconfig&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Fix-Unrecognized-Font-Family"><a href="#Fix-Unrecognized-Font-Family" class="headerlink" title="Fix Unrecognized Font Family"></a>Fix Unrecognized Font Family</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- by default fontconfig assumes any unrecognized font is sans-serif, so --&gt;</span><br><span class="line">&lt;!-- the fonts above now have /both/ families.  fix this. --&gt;</span><br><span class="line">&lt;!-- note that &quot;delete&quot; applies to the first match --&gt;</span><br><span class="line">&lt;match&gt;</span><br><span class="line">    &lt;test compare=&quot;eq&quot; name=&quot;family&quot;&gt;</span><br><span class="line">        &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">    &lt;/test&gt;</span><br><span class="line">    &lt;test compare=&quot;eq&quot; name=&quot;family&quot;&gt;</span><br><span class="line">        &lt;string&gt;monospace&lt;/string&gt;</span><br><span class="line">    &lt;/test&gt;</span><br><span class="line">    &lt;edit mode=&quot;delete&quot; name=&quot;family&quot;/&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;match target=&quot;pattern&quot;&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">                &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">                &lt;string&gt;serif&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;test qual=&quot;all&quot; name=&quot;family&quot; compare=&quot;not_eq&quot;&gt;</span><br><span class="line">                &lt;string&gt;monospace&lt;/string&gt;</span><br><span class="line">        &lt;/test&gt;</span><br><span class="line">        &lt;edit name=&quot;family&quot; mode=&quot;append_last&quot;&gt;</span><br><span class="line">                &lt;string&gt;sans-serif&lt;/string&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Setting-Default-Fonts"><a href="#Setting-Default-Fonts" class="headerlink" title="Setting Default Fonts"></a>Setting Default Fonts</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;alias&gt;</span><br><span class="line">    &lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">    &lt;prefer&gt;</span><br><span class="line">        &lt;family&gt;Arial&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Helvetica&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Symbol&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Microsoft YaHei UI&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;SimSun-ExtB&lt;/family&gt;</span><br><span class="line">    &lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line"></span><br><span class="line">&lt;alias&gt;</span><br><span class="line">    &lt;family&gt;serif&lt;/family&gt;</span><br><span class="line">    &lt;prefer&gt;</span><br><span class="line">        &lt;family&gt;Times New Roman&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Georgia&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Symbol&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Cambria&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Cambria Math&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Microsoft YaHei UI&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;SimSun\-ExtB&lt;/family&gt;</span><br><span class="line">    &lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line"></span><br><span class="line">&lt;alias&gt;</span><br><span class="line">    &lt;family&gt;monospace&lt;/family&gt;</span><br><span class="line">    &lt;prefer&gt;</span><br><span class="line">        &lt;family&gt;JetBrains Mono&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Consolas&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Courier New&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Symbol&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Cambria Math&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;Microsoft YaHei UI&lt;/family&gt;</span><br><span class="line">        &lt;family&gt;SimSun-ExtB&lt;/family&gt;</span><br><span class="line">    &lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Input-Method-IM-Framework-Intelligent-Input-Bus-IBus"><a href="#Input-Method-IM-Framework-Intelligent-Input-Bus-IBus" class="headerlink" title="Input Method (IM) Framework - Intelligent Input Bus (IBus)"></a>Input Method (IM) Framework - Intelligent Input Bus (IBus)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y --no-install-recommends \</span><br><span class="line">    ibus ibus-gtk ibus-gtk3 ibus-gtk4 ibus-input-pad ibus-libpinyin \</span><br><span class="line">    ibus-wayland</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export NO_AT_BRIDGE=1</span><br><span class="line"></span><br><span class="line">export QT_IM_MODULE=ibus</span><br><span class="line">export GTK_IM_MODULE=ibus</span><br><span class="line">export XMODIFIERS=@im=ibus</span><br><span class="line"></span><br><span class="line">dbus-launch ibus-daemon -drx</span><br><span class="line"></span><br><span class="line">dbus-launch ibus-setup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pkill ibus-daemon</span><br><span class="line">dbus-launch ibus-daemon -drx</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">libpulse-dev - PulseAudio client development headers and libraries</span><br><span class="line">libpulse-java - PulseAudio sound driver for Java</span><br><span class="line">libao-dev - Cross Platform Audio Output Library Development</span><br><span class="line">libasound2-dev - shared library for ALSA applications -- development files</span><br><span class="line"></span><br><span class="line">sudo apt-get install -y --no-install-recommends pulseaudio-utils pulseaudio</span><br><span class="line">pactl list sinks</span><br><span class="line"></span><br><span class="line">cat /usr/share/sounds/alsa/*.wav | pacat</span><br><span class="line"></span><br><span class="line">sudo apt-get install --no-install-recommends mpg321 cmus moc mp3blaster mpg123</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">env PULSE_SERVER=server_hostname_or_ip mplayer test.mp3</span><br><span class="line"></span><br><span class="line">apt-get install -y --no-install-recommends \</span><br><span class="line">    dbus dbus-x11 dbus-user-session python3-dbus \</span><br><span class="line">    ibus ibus-gtk ibus-gtk3 ibus-gtk4 ibus-input-pad ibus-libpinyin ibus-rime \</span><br><span class="line">    ibus-table-emoji ibus-table-latex ibus-table-wubi ibus-wayland</span><br></pre></td></tr></table></figure>

<h3 id="Input-Method-IM-Framework-Fcitx"><a href="#Input-Method-IM-Framework-Fcitx" class="headerlink" title="Input Method (IM) Framework - Fcitx"></a>Input Method (IM) Framework - Fcitx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">sda    8:0    0 363.1M  1 disk</span><br><span class="line">sdb    8:16   0     4G  0 disk [SWAP]</span><br><span class="line">sdc    8:32   0   256G  0 disk /mnt/wslg/distro</span><br><span class="line">                               /</span><br><span class="line">sdd    8:48   0     1T  0 disk /mnt/wsl/Coptwsl2scratchext4vhdx</span><br><span class="line"></span><br><span class="line">$ cd /mnt/wsl/Coptwsl2scratchext4vhdx</span><br><span class="line">$ sudo chattr -i etc/wsl.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://packages.debian.org/bullseye/vainfo</span><br><span class="line">https://devblogs.microsoft.com/commandline/d3d12-gpu-video-acceleration-in-the-windows-subsystem-for-linux-now-available/</span><br><span class="line">sudo apt-get install -y vainfo</span><br><span class="line"></span><br><span class="line">vainfo --display drm --device /dev/dri/card0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\wsl.exe</span><br><span class="line">C:\Users\edngsng\AppData\Local\Microsoft\WindowsApps\wsl.exe</span><br><span class="line"></span><br><span class="line">wsl.exe -d Alpine-3.17 -u root mount --bind /home/dongsheng /mnt/wsl/Alpine/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/etc/fstab</span><br><span class="line">UUID=e9999b9b-5a8e-41e1-9881-a2f766838798       /home/&lt;username&gt;/vhd-part1    ext4    defaults     0       2</span><br><span class="line"></span><br><span class="line">PS C:\&gt; New-VHD -Path $env:USERPROFILE\wsl2-shared.vhdx -Dynamic -SizeBytes 10GB</span><br><span class="line"></span><br><span class="line">wsl -d Ubuntu-20.04 --mount --vhd $env:USERPROFILE\wsl2-shared.vhdx --bare</span><br><span class="line">pwsh.exe -Command &quot;wsl.exe -d Ubuntu-20.04 --mount --vhd C:\Users\&lt;username&gt;\wsl2-shared.vhdx --bare | out-null; wsl.exe -d Ubuntu-20.04&quot;</span><br><span class="line"></span><br><span class="line">file:///C:/var/vcs/me/user-config/lang/rust/NetBSD-Cross-Build.md</span><br><span class="line">file:///C:/var/vcs/me/user-config/lang/rust/OpenBSD-Cross-Build.md</span><br><span class="line">file:///C:/var/vcs/me/user-config/lang/compiler/gcc/00-summary.md</span><br><span class="line">https://gcc.gnu.org/pub/gcc/snapshots/LATEST-13/</span><br><span class="line"></span><br><span class="line">+ 安装 WSL 的内置发行版</span><br><span class="line">+ 从 OCI image 安装发行版</span><br><span class="line">+ DNS 配置</span><br><span class="line">+ SLES 的 repo 配置</span><br><span class="line">+ 在多个发行版中共享数据盘</span><br><span class="line">+ systemd 与后台服务</span><br><span class="line">+ 更新和定制 Linux 内核</span><br><span class="line">+ WSLg，Wayland 和 Weston</span><br><span class="line">+ 用户配置与 uid 1000 问题</span><br><span class="line">+ 常用 GUI 文本编辑器</span><br><span class="line">+ 增加与配置 Windows 或 macOS 的字体</span><br><span class="line">+ 修正 sans-serif，serif 和 monospace 的字体列表</span><br><span class="line">+ GTK 与 HiDPI 的配置</span><br><span class="line">+ 中文输入法的安装与配置</span><br><span class="line">+ IntelliJ IDEA 的配置</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda - Common Base Linux Mariner</span><br><span class="line">           https://aka.ms/cbl-mariner</span><br><span class="line">/dev/sdb - swap</span><br><span class="line"></span><br><span class="line">First, realize that there are (for the sake of this discussion) two parts to WSL2:</span><br><span class="line"></span><br><span class="line">1. The Virtual Machine Platform where the actual WSL2 virtual machine is running. To my knowledge, there&#x27;s no way for you to actually see or interact with this virtual machine.</span><br><span class="line"></span><br><span class="line">2. The WSL2 distributions that you run. These aren&#x27;t virtual machines themselves, but are instead separate containers created inside individual namespaces.</span><br><span class="line"></span><br><span class="line">Each WSL2 distribution (I call them &quot;instances&quot;) has its own individual:</span><br><span class="line"></span><br><span class="line">+ Users</span><br><span class="line">+ Mounts</span><br><span class="line">+ PID mapping</span><br><span class="line">+ And more</span><br><span class="line"></span><br><span class="line">But it also shares some resources with the parent. As with a Docker container:</span><br><span class="line"></span><br><span class="line">+ The same kernel is being used for all WSL2 instances</span><br><span class="line">+ The same memory is being used for all WSL2 instances</span><br><span class="line">+ Of course, the same CPU</span><br><span class="line">+ The same device tree (/dev), which includes /dev/sdb where the swap lives.</span><br><span class="line">+ And, most importantly for your question, the same Swap memory itself is being used for all instances.</span><br><span class="line">This swap is handled by and mounted in the parent VM that you can&#x27;t access. It&#x27;s reported in /proc/swaps, but that report comes from the parent VM kernel.</span><br></pre></td></tr></table></figure>

      </section>
    </article>
    
    
  </div>
  <aside>
    
    <div class="toc-container">
      <h1>
        catalog
      </h1>
      <div class="content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Run-Linux-GUI-Programs-With-WSLg-Through-OCI-Image"><span class="toc-number">1.</span> <span class="toc-text">Run Linux GUI Programs With WSLg Through OCI Image</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-WSL2"><span class="toc-number">1.1.</span> <span class="toc-text">Install WSL2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Attaches-and-mounts-disk-in-all-WSL2-distributions"><span class="toc-number">1.2.</span> <span class="toc-text">Attaches and mounts disk in all WSL2 distributions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-Virtual-Disk"><span class="toc-number">1.2.1.</span> <span class="toc-text">Create Virtual Disk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mount-Virtual-Disk-Windows"><span class="toc-number">1.2.2.</span> <span class="toc-text">Mount Virtual Disk - Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mount-Virtual-Disk-Linux"><span class="toc-number">1.2.3.</span> <span class="toc-text">Mount Virtual Disk - Linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debian-12"><span class="toc-number">1.3.</span> <span class="toc-text">Debian 12</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Import-Debian-Image"><span class="toc-number">1.3.1.</span> <span class="toc-text">Import Debian Image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Setup-Debian"><span class="toc-number">1.3.2.</span> <span class="toc-text">Setup Debian</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Font-Configuration"><span class="toc-number">1.3.3.</span> <span class="toc-text">Font Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wayland-Information"><span class="toc-number">1.3.4.</span> <span class="toc-text">Wayland Information</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Weston-Compositor"><span class="toc-number">1.3.5.</span> <span class="toc-text">Weston Compositor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GTK-with-HiDPI"><span class="toc-number">1.3.6.</span> <span class="toc-text">GTK with HiDPI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fcitx"><span class="toc-number">1.3.7.</span> <span class="toc-text">fcitx</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Installation"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Daily-Usage"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">Daily Usage</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ibus"><span class="toc-number">1.3.8.</span> <span class="toc-text">ibus</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Installation-1"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Daily-Usage-1"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">Daily Usage</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu-22-04"><span class="toc-number">1.4.</span> <span class="toc-text">Ubuntu 22.04</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-WSL-Distribution-From-RootFs"><span class="toc-number">1.4.1.</span> <span class="toc-text">Create WSL Distribution From RootFs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sets-a-Distribution-as-Default"><span class="toc-number">1.4.2.</span> <span class="toc-text">Sets a Distribution as Default</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Use-Environment-Variables"><span class="toc-number">1.4.3.</span> <span class="toc-text">Use Environment Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Update-DNS-Configuration"><span class="toc-number">1.4.4.</span> <span class="toc-text">Update DNS Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-Locales"><span class="toc-number">1.4.5.</span> <span class="toc-text">Configure Locales</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Update-VIM-Configuration"><span class="toc-number">1.4.6.</span> <span class="toc-text">Update VIM Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-User-uid-1000-issue"><span class="toc-number">1.4.7.</span> <span class="toc-text">Create User (uid 1000 issue)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-Default-User"><span class="toc-number">1.4.8.</span> <span class="toc-text">Configure Default User</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-The-GUI-Editor-Program"><span class="toc-number">1.4.9.</span> <span class="toc-text">Install The GUI Editor Program</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GTK-Configuration"><span class="toc-number">1.4.10.</span> <span class="toc-text">GTK Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GTK-2"><span class="toc-number">1.4.10.1.</span> <span class="toc-text">GTK 2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GTK-3"><span class="toc-number">1.4.10.2.</span> <span class="toc-text">GTK 3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GTK-4"><span class="toc-number">1.4.10.3.</span> <span class="toc-text">GTK 4</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wayland-info"><span class="toc-number">1.4.11.</span> <span class="toc-text">wayland-info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Font-Configuration-1"><span class="toc-number">1.4.12.</span> <span class="toc-text">Font Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Add-Windows-Fonts"><span class="toc-number">1.4.12.1.</span> <span class="toc-text">Add Windows Fonts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Disable-Embedded-Bitmap-Fonts"><span class="toc-number">1.4.12.2.</span> <span class="toc-text">Disable Embedded Bitmap Fonts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fix-Unrecognized-Font-Family"><span class="toc-number">1.4.12.3.</span> <span class="toc-text">Fix Unrecognized Font Family</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Setting-Default-Fonts"><span class="toc-number">1.4.12.4.</span> <span class="toc-text">Setting Default Fonts</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-Method-IM-Framework-Intelligent-Input-Bus-IBus"><span class="toc-number">1.4.13.</span> <span class="toc-text">Input Method (IM) Framework - Intelligent Input Bus (IBus)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Input-Method-IM-Framework-Fcitx"><span class="toc-number">1.4.14.</span> <span class="toc-text">Input Method (IM) Framework - Fcitx</span></a></li></ol></li></ol></li></ol>
      </div>
    </div>
    
  </aside>
</main>



  <footer>
  <div class="copyright">
    <div>
      &copy;
      2024 | Powered by <a href="https://hexo.io"
        target="_blank">Hexo</a>&nbsp
    </div>
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath"
        target="_blank">Aath</a>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<script src="/lib/ScrollMagic.min.js"></script>


<script src="/lib/lodash.min.js"></script>

<script>
  document.body.addEventListener('touchstart', function () { });

  // 文章图片预览
  $("article img").each(function () {
    var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
    $(this).wrapAll(strA);
  });

  // 目录联动
  let tocLinkList = $('.toc-link')

  let controller = new ScrollMagic.Controller({
    globalSceneOptions: {
      triggerHook: 0.01
    }
  })

  tocLinkList.each(function (index, elem) {
    let href = $(this).attr("href");
    let nextHref = tocLinkList.eq(index + 1).attr("href");
    let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

    new ScrollMagic.Scene({ triggerElement: href })
      .duration(height)
      .setClassToggle(".toc [href='" + href + "']", 'active')
      .addTo(controller)
  })

  window.addEventListener('load', function () {
    // 目录联动 图片加载完成后从新计算
    tocLinkList.each(function (index, elem) {
      let href = $(this).attr("href");
      let nextHref = tocLinkList.eq(index + 1).attr("href");
      let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

      new ScrollMagic.Scene({ triggerElement: href })
        .duration(height)
        .setClassToggle(".toc [href='" + href + "']", 'active')
        .addTo(controller)
    })
  })
</script>

<script src="/lib/jquery.fancybox.min.js"></script>



</body>
</html>
