<!DOCTYPE html>
<html lang=zh>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="keywords" content="">
  
    <link rel="icon" href="">
  
    
  <title>Haskell Programming Language | 上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</title>
  <meta name="description" content="">
  
<link rel="stylesheet" href="/style.css">

  
<link rel="stylesheet" href="/lib/jquery.fancybox.min.css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
      <section class="content markdown-body">
        <h1>
          Haskell Programming Language
        </h1>
        <div class='post-meta'>
          <i class="fa fa-calendar"
            aria-hidden="true"></i> <time>
            2021/03/13</time>
          
          | <i class="fa fa-folder-open-o"
            aria-hidden="true"></i>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/Programming/">Programming</a>/ <a class="article-category-link" href="/categories/Programming/Haskell/">Haskell</a>
  </div>



          
          
          |
          
          <i class="fa fa-tags"
            aria-hidden="true"></i>
          
          
  <a href="/tags/#Programming" class='tag'>Programming</a>

  <a href="/tags/#Haskell" class='tag'>Haskell</a>


          
        </div>
        <h1 id="Haskell-Programming-Language"><a href="#Haskell-Programming-Language" class="headerlink" title="Haskell Programming Language"></a>Haskell Programming Language</h1><p>Haskell is a general-purpose, statically typed, purely functional programming language with type inference and lazy evaluation. Developed to be suitable for teaching, research and industrial application, Haskell has pioneered a number of advanced programming language features such as type classes, which enable type-safe operator overloading. Haskell’s main implementation is the Glasgow Haskell Compiler (GHC). It is named after logician Haskell Curry.</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul>
<li>Statically typed</li>
<li>Purely functional</li>
<li>Type inference</li>
<li>Concurrent</li>
<li>Lazy</li>
<li>Packages</li>
</ul>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/ghc/">GHC</a>: A compiler and interpreter for Haskell programs.</li>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/cabal/">Cabal</a>: Common Architecture for Building Applications and Libraries.</li>
<li><a target="_blank" rel="noopener" href="https://docs.haskellstack.org/">Stack</a>: A project builder for multi-package Haskell projects.</li>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/haddock/">Haddock</a>: A documentation generator for Haskell packages.</li>
<li><a target="_blank" rel="noopener" href="https://hackage.haskell.org/">Hackage</a>: The Haskell central packages repository.</li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/">Stackage</a>: A curated repository of thousands of packages installed on demand.</li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Haskell has significant usage in:</p>
<ul>
<li>Web development</li>
<li>Concurrent and parallel programming</li>
<li>Cluster computing</li>
<li>Financial modeling</li>
<li>Scientific and biotech modeling</li>
<li>Parsers, compilers, type-checkers</li>
<li>Blockchain</li>
</ul>
<h2 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/haskell-report">Haskell 2010 Language Report - git</a></li>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/definition/haskell2010.pdf">Haskell 2010 Language Report - pdf</a></li>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/onlinereport/haskell2010/">Haskell 2010 Language Report - online</a></li>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/ghc/blog.html">GHC Developer Blog</a></li>
<li><a target="_blank" rel="noopener" href="https://pvp.haskell.org/">Haskell Package Versioning Policy</a></li>
<li><a target="_blank" rel="noopener" href="https://gitlab.haskell.org/ghc/ghc/-/milestones">The GHC Milestones</a></li>
<li><a target="_blank" rel="noopener" href="https://ghc.gitlab.haskell.org/ghc/doc/">The GHC User’s Guide and Libraries - gitlab</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/latest/docs/html/">The GHC User’s Guide and Libraries - latest</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0-latest/docs/html/">The GHC User’s Guide and Libraries - 9.0</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.10-latest/docs/html/">The GHC User’s Guide and Libraries - 8.10</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.8-latest/docs/html/">The GHC User’s Guide and Libraries - 8.8</a></li>
<li><a target="_blank" rel="noopener" href="https://cabal.readthedocs.io/">The Cabal User Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.haskellstack.org/">The Haskell Tool Stack User Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://haskell-haddock.readthedocs.io/">The Haddock User Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.haskell.org/How_to_write_a_Haskell_program">How to write a Haskell program</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/learn/">FP Complete Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.snoyman.com/reveal/why-applied-haskell/">Why Applied Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/promote/">Promote Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/library/async/">Asynchronous and Concurrent Programming</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/library/binary/">Decoding and encoding binary data</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/tutorial/stack-script/">How to Script with Stack</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/tutorial/profiling/">Profiling and Performance</a></li>
<li><a target="_blank" rel="noopener" href="https://www.fpcomplete.com/haskell/tutorial/mutable-variables/">Mutable variables</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/why-you-should-use-stm">Why you should use Software Transactional Memory</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.haskell.org/Haskell_Tutorial_for_C_Programmers">Haskell Tutorial for C Programmers</a></li>
<li><a target="_blank" rel="noopener" href="http://dev.stephendiehl.com/hask/">What I Wish I Knew When Learning Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://livebook.manning.com/book/haskell-in-depth/">Haskell in Depth</a></li>
<li><a target="_blank" rel="noopener" href="http://learnyouahaskell.com/chapters">Learn You a Haskell for Great Good!</a></li>
<li><a target="_blank" rel="noopener" href="http://book.realworldhaskell.org/read/">Real World Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.oreilly.com/library/view/parallel-and-concurrent/9781449335939/">Parallel and Concurrent Programming in Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/">Stable Haskell package sets</a></li>
<li><a target="_blank" rel="noopener" href="http://hackage.haskell.org/">Hackage: The Haskell Package Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://hoogle.haskell.org/">Haskell API search engine</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/typelead/eta">Eta - Modern Haskell on the JVM</a></li>
<li><a target="_blank" rel="noopener" href="https://eta-lang.org/docs/cheatsheets/eta-cheatsheet">Eta Cheatsheet</a></li>
<li><a target="_blank" rel="noopener" href="https://taylor.fausak.me/">2020 State of Haskell Survey</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@fommil/simple-haskell-is-best-haskell-6a1ea59c73b">Simple Haskell is Best Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://levelup.gitconnected.com/delivering-with-haskell-a347d8359597">Delivering with Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.parsonsmatt.org/2015/06/07/servant-persistent.html">A Brief Example of servant-persistent</a></li>
<li><a target="_blank" rel="noopener" href="https://www.parsonsmatt.org/2017/04/26/basic_type_level_programming_in_haskell.html">Basic Type Level Programming in Haskell</a></li>
<li><a target="_blank" rel="noopener" href="https://www.parsonsmatt.org/2018/03/14/servant_route_smooshing.html">Servant Route Smooshing</a></li>
<li><a target="_blank" rel="noopener" href="https://gist.github.com/mightybyte/6c469c125eb50e0c2ebf4ae26b5adfff">Haskell Language Extension Taxonomy</a></li>
<li><a target="_blank" rel="noopener" href="https://gitlab.haskell.org/ghc/ghc/-/wikis/language-pragma-history">Language pragma history</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0380-ghc2021.rst">GHC 2021</a></li>
</ul>
<h2 id="Download-and-Install"><a href="#Download-and-Install" class="headerlink" title="Download and Install"></a>Download and Install</h2><p>The latest (2021-03-13) <strong><a target="_blank" rel="noopener" href="https://www.stackage.org/lts">LTS Haskell</a></strong> 17 use <strong>ghc 8.10.4</strong>, so <strong>don’t install ghc 9.0 or later</strong> if you are beginners.</p>
<h3 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h3><p>See <a target="_blank" rel="noopener" href="https://github.com/haskell/haskell-language-server">Haskell Language Server (HLS)</a>, you can install from <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=haskell.haskell">the VSCode marketplace</a>, or manually from the repository <a target="_blank" rel="noopener" href="https://github.com/haskell/vscode-haskell">Haskell for Visual Studio Code</a>.</p>
<h3 id="OS-specific-packages"><a href="#OS-specific-packages" class="headerlink" title="OS-specific packages"></a>OS-specific packages</h3><p>The <a target="_blank" rel="noopener" href="https://www.haskell.org/downloads/linux/">OS-specific packages</a> (eg. RPMs on Linux) are generally a better bet than the vanilla binary bundles, because they will check for dependencies and allow the package to be uninstalled at a later date.</p>
<p>e.g., install GHC 8.10.4 and cabal-install 3.4 on Debian Linux 10 (buster) amd64:</p>
<h4 id="GHC-on-Debian-10"><a href="#GHC-on-Debian-10" class="headerlink" title="GHC on Debian 10"></a>GHC on Debian 10</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">sudo</span> apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys BA3CBA3FFE22B574</span></span><br><span class="line">curl -sSL &quot;https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0xBA3CBA3FFE22B574&quot; \</span><br><span class="line">  | sudo tee /etc/apt/trusted.gpg.d/downloads.haskell.org.asc</span><br><span class="line"></span><br><span class="line">echo deb [arch=amd64] http://downloads.haskell.org/debian buster main \</span><br><span class="line">  | sudo tee /etc/apt/sources.list.d/haskell-buster.list</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install --no-install-recommends -y aria2 autoconf automake \</span><br><span class="line">    build-essential ca-certificates clang cmake curl dialog fakeroot file git \</span><br><span class="line">    gnupg less lld llvm man-db manpages-dev ninja-build python3 sudo \</span><br><span class="line">    systemd-container tmux vim \</span><br><span class="line">    libbsd-dev libcurl4-openssl-dev libdwarf-dev libexpat1-dev libffi-dev \</span><br><span class="line">    libgmp-dev libjson-c-dev libjsoncpp-dev liblzma-dev libmariadb-dev \</span><br><span class="line">    libncurses-dev libnuma-dev libpcre2-dev libpcre3-dev libpq-dev \</span><br><span class="line">    librdkafka-dev libssl-dev libunwind-dev libxml2-dev libyaml-dev \</span><br><span class="line">    libzstd-dev zlib1g-dev</span><br><span class="line"></span><br><span class="line">sudo apt install -y ghc-8.10.4 cabal-install-3.4</span><br><span class="line">curl -sSL https://get.haskellstack.org/stable/linux-x86_64.tar.gz \</span><br><span class="line">  | sudo tar -xvz --strip-components=1 -C /usr/bin --wildcards */stack</span><br><span class="line"></span><br><span class="line">export PATH=/opt/cabal/3.4/bin:/opt/ghc/8.10.4/bin:/usr/bin:/bin:/usr/sbin</span><br></pre></td></tr></table></figure>

<h3 id="Minimal-installation"><a href="#Minimal-installation" class="headerlink" title="Minimal installation"></a>Minimal installation</h3><p>The Minimal installation include GHC (the compiler), build tools (primarily Cabal and Stack), and documentation generator (primarily Haddock).</p>
<h4 id="GHC"><a href="#GHC" class="headerlink" title="GHC"></a>GHC</h4><p>GHC 8.10 only works with cabal-install version 3.2 or later.
GHC 9.0 only works with cabal-install version 3.4 or later.
GHC 9.2.1 will be released in June 2021 sporting Darwin&#x2F;ARM support.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.haskell.org/downloads/linux/">Downloads for Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~debian/">GHC &amp; Cabal APT Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/debian/pool/main/g/">GHC APT Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/debian/pool/main/c/">Cabal APT Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/">GHC Downloads Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.8-latest/">GHC - 8.8 Latest</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-src.tar.xz">GHC - 8.10.4 Source</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-alpine3.10-linux-integer-simple.tar.xz">GHC - 8.10.4 for Alpine Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-deb10-linux.tar.xz">GHC - 8.10.4 for Debian Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-unknown-mingw32.tar.xz">GHC - 8.10.4 for Windows</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0-latest/">GHC - 9.0 Latest</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-src.tar.xz">GHC - 9.0.1 Source</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-alpine3.10-linux-integer-simple.tar.xz">GHC - 9.0.1 for Alpine Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-deb10-linux.tar.xz">GHC - 9.0.1 for Debian Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-unknown-mingw32.tar.xz">GHC - 9.0.1 for Windows</a></li>
</ul>
<h4 id="Cabal"><a href="#Cabal" class="headerlink" title="Cabal"></a>Cabal</h4><ul>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~cabal/">Cabal Repository</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~cabal/cabal-install-latest/">Cabal Repository - Latest</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~cabal/cabal-install-3.4.0.0/cabal-install-3.4.0.0-x86_64-alpine-3.11.6-static-noofd.tar.xz">Cabal Repository - Alpine Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~cabal/cabal-install-3.4.0.0/cabal-install-3.4.0.0-x86_64-ubuntu-16.04.tar.xz">Cabal Repository - Debian&#x2F;Ubuntu Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~cabal/cabal-install-3.4.0.0/cabal-install-3.4.0.0-x86_64-windows.zip">Cabal Repository - Windows</a></li>
</ul>
<p>Cabal install is done by installing them in the store and symlinking&#x2F;copying the executables in the directory specified by the <code>--installdir</code> flag (<code>~/.cabal/bin/</code> by default). If you want the installed executables to be available globally, make sure that the PATH environment variable contains that directory.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- ~/.cabal/config</span><br><span class="line">-- %APPDATA%\cabal\config</span><br><span class="line">-- https://cabal.readthedocs.io/en/3.4/installing-packages.html</span><br><span class="line">-- repository my-local-repository</span><br><span class="line">--   url: file+noindex:///absolute/path/to/directory</span><br><span class="line"></span><br><span class="line">-- WSL 1 fix: fdLock: invalid argument (Invalid argument)</span><br><span class="line">-- https://github.com/haskell/cabal/issues/6551</span><br><span class="line">-- constraint: lukko -ofd-locking</span><br><span class="line"></span><br><span class="line">-- static: True</span><br><span class="line">-- executable-static: True</span><br><span class="line">optimization: 2</span><br><span class="line">executable-stripping: True</span><br><span class="line"></span><br><span class="line">program-default-options</span><br><span class="line">  -- -Werror -Wall -threaded -fPIC -static -optl-s -optl-static -optl-pthread</span><br><span class="line">  -- -optc-O3 -optc-ffast-math -funfolding-use-threshold=16 -haddock</span><br><span class="line">  ghc-options: -O2 -threaded -Wall -fPIC</span><br></pre></td></tr></table></figure>

<h4 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h4><ul>
<li><a target="_blank" rel="noopener" href="https://get.haskellstack.org/stable/linux-x86_64.tar.gz">Stack on Linux</a></li>
<li><a target="_blank" rel="noopener" href="https://get.haskellstack.org/stable/windows-x86_64.zip">Stack on Windows</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">~/.stack/config.yaml</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">%APPDATA%/stack/config.yaml</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">http://docs.haskellstack.org/en/stable/yaml_configuration/</span></span><br><span class="line">templates:</span><br><span class="line">  params:</span><br><span class="line">    author-email: songdongsheng@live.cn</span><br><span class="line">    author-name: 宋冬生</span><br><span class="line"></span><br><span class="line">allow-different-user: true</span><br><span class="line">local-bin-path: C:\Users\EDNGSNG\AppData\Roaming\cabal\bin</span><br><span class="line"></span><br><span class="line">color: auto</span><br><span class="line">recommend-stack-upgrade: true</span><br><span class="line"></span><br><span class="line">system-ghc: true</span><br><span class="line">install-ghc: false</span><br><span class="line"></span><br><span class="line">compiler-check: newer-minor</span><br><span class="line">allow-newer: true</span><br><span class="line"></span><br><span class="line">ghc-options:</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">-Werror -Wall -threaded -fPIC -static -optl-s -optl-static -optl-pthread</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">    -optc-O3 -optc-ffast-math -funfolding-use-threshold=16 -haddock</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="string">&quot;<span class="variable">$locals</span>&quot;</span>: -O2 -threaded -Wall -fPIC</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="string">&quot;<span class="variable">$targets</span>&quot;</span>: -O2 -threaded -Wall -fPIC</span></span><br><span class="line">  &quot;$everything&quot;: -O2 -threaded -Wall -fPIC</span><br><span class="line"></span><br><span class="line">connection-count: 16</span><br><span class="line"></span><br><span class="line">package-indices:</span><br><span class="line">  - download-prefix: https://hackage.haskell.org/</span><br><span class="line">    hackage-security:</span><br><span class="line">      keyids:</span><br><span class="line">        - 0a5c7ea47cd1b15f01f5f51a33adda7e655bc0f0b0615baa8e271f4c3351e21d</span><br><span class="line">        - 1ea9ba32c526d1cc91ab5e5bd364ec5e9e8cb67179a471872f6e26f0ae773d42</span><br><span class="line">        - 280b10153a522681163658cb49f632cde3f38d768b736ddbc901d99a1a772833</span><br><span class="line">        - 2a96b1889dc221c17296fcc2bb34b908ca9734376f0f361660200935916ef201</span><br><span class="line">        - 2c6c3627bd6c982990239487f1abd02e08a02e6cf16edb105a8012d444d870c3</span><br><span class="line">        - 51f0161b906011b52c6613376b1ae937670da69322113a246a09f807c62f6921</span><br><span class="line">        - 772e9f4c7db33d251d5c6e357199c819e569d130857dc225549b40845ff0890d</span><br><span class="line">        - aa315286e6ad281ad61182235533c41e806e5a787e0b6d1e7eef3f09d137d2e9</span><br><span class="line">        - fe331502606802feac15e514d9b9ea83fee8b6ffef71335479a2e68d84adc6b0</span><br><span class="line">      key-threshold: 3 # number of keys required</span><br></pre></td></tr></table></figure>

<h4 id="Haddock"><a href="#Haddock" class="headerlink" title="Haddock"></a>Haddock</h4><p><a target="_blank" rel="noopener" href="https://www.haskell.org/haddock/">Haddock</a> is a documentation generator for Haskell packages.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; cabal update</span><br><span class="line">PS C:\&gt; cabal install haddock</span><br><span class="line">Resolving dependencies...</span><br><span class="line">Build profile: -w ghc-9.0.1 -O1</span><br><span class="line">In order, the following will be built (use -v for more details):</span><br><span class="line"> - ghc-paths-0.1.0.12 (lib:ghc-paths) (requires download &amp; build)</span><br><span class="line"> - haddock-library-1.10.0 (lib) (requires download &amp; build)</span><br><span class="line"> - haddock-api-2.25.0 (lib) (requires download &amp; build)</span><br><span class="line"> - haddock-2.25.0 (exe:haddock) (requires download &amp; build)</span><br><span class="line">Downloading  haddock-library-1.10.0</span><br><span class="line">Downloaded   haddock-library-1.10.0</span><br><span class="line">Downloading  ghc-paths-0.1.0.12</span><br><span class="line">Starting     haddock-library-1.10.0 (lib)</span><br><span class="line">Downloaded   ghc-paths-0.1.0.12</span><br><span class="line">Downloading  haddock-api-2.25.0</span><br><span class="line">Starting     ghc-paths-0.1.0.12 (all, legacy fallback)</span><br><span class="line">Downloaded   haddock-api-2.25.0</span><br><span class="line">Downloading  haddock-2.25.0</span><br><span class="line">Downloaded   haddock-2.25.0</span><br><span class="line">Building     haddock-library-1.10.0 (lib)</span><br><span class="line">Installing   haddock-library-1.10.0 (lib)</span><br><span class="line">Completed    haddock-library-1.10.0 (lib)</span><br><span class="line">Building     ghc-paths-0.1.0.12 (all, legacy fallback)</span><br><span class="line">Installing   ghc-paths-0.1.0.12 (all, legacy fallback)</span><br><span class="line">Completed    ghc-paths-0.1.0.12 (all, legacy fallback)</span><br><span class="line">Starting     haddock-api-2.25.0 (lib)</span><br><span class="line">Building     haddock-api-2.25.0 (lib)</span><br><span class="line">Installing   haddock-api-2.25.0 (lib)</span><br><span class="line">Completed    haddock-api-2.25.0 (lib)</span><br><span class="line">Starting     haddock-2.25.0 (exe:haddock)</span><br><span class="line">Building     haddock-2.25.0 (exe:haddock)</span><br><span class="line">Installing   haddock-2.25.0 (exe:haddock)</span><br><span class="line">Completed    haddock-2.25.0 (exe:haddock)</span><br><span class="line">Copying &#x27;haddock.exe&#x27; to</span><br><span class="line">&#x27;%APPDATA%\cabal\bin\haddock.exe&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><ul>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/_/haskell?tab=tags">Minimal Haskell tool-chain Docker Images</a></li>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/r/utdemir/ghc-musl/tags">Haskell Docker Images for static executables</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --pull always haskell:8.10-stretch</span><br><span class="line">docker run -it --rm --pull always haskell:8.10-buster</span><br><span class="line"></span><br><span class="line">docker run -it --rm --pull always haskell:8.8-stretch</span><br><span class="line">docker run -it --rm --pull always haskell:8.8-buster</span><br><span class="line"></span><br><span class="line">docker run -it --rm --pull always fpco/stack-build:lts-16</span><br><span class="line">docker run -it --rm --pull always fpco/stack-build-small:lts-16</span><br></pre></td></tr></table></figure>

<h3 id="Hello-GHC"><a href="#Hello-GHC" class="headerlink" title="Hello GHC"></a>Hello GHC</h3><ul>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/using.html#make-mode">Using ghc –make</a></li>
<li><a target="_blank" rel="noopener" href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/flags.html#forcing-options-to-particular-phases">Forcing options to particular phases</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/opt/ghc-8.10/bin:/bin:/usr/bin:/sbin:/usr/sbin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --version</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --show-options</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --info</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; HelloWorld.hs</span></span></span><br><span class="line">module Main where</span><br><span class="line">main = putStrLn &quot;Hello, World!&quot;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">ld.lld: error: duplicate symbol: __lll_lock_wait_private</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl -s -optl -static \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">        -optl -Wl,--allow-multiple-definition</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl -s</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">./HelloWorld</span></span></span><br><span class="line">Hello, World !</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ks HelloWorld</span></span></span><br><span class="line">732     HelloWorld  [8.10.4]</span><br><span class="line">744     HelloWorld  [9.0.1]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">file HelloWorld</span></span></span><br><span class="line">HelloWorld: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,</span><br><span class="line">interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0,</span><br><span class="line">BuildID[xxHash]=656ac9e0cf71b484, stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">ldd HelloWorld</span></span></span><br><span class="line">        linux-vdso.so.1 (0x00007ffc78aa0000)</span><br><span class="line">        libgmp.so.10 =&gt; /lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f02d43f8000)</span><br><span class="line">        libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f02d4233000)</span><br><span class="line">        libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f02d40ef000)</span><br><span class="line">        librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f02d40e4000)</span><br><span class="line">        libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f02d40de000)</span><br><span class="line">        libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f02d40bc000)</span><br><span class="line">        /lib64/ld-linux-x86-64.so.2 (0x00007f02d4487000)</span><br></pre></td></tr></table></figure>

<h3 id="Hello-Cabal"><a href="#Hello-Cabal" class="headerlink" title="Hello Cabal"></a>Hello Cabal</h3><ul>
<li><a target="_blank" rel="noopener" href="https://cabal.readthedocs.io/en/3.4/cabal-package.html#modules-and-preprocessors">Module and Preprocessor</a></li>
<li><a target="_blank" rel="noopener" href="https://cabal.readthedocs.io/en/3.4/cabal-package.html#conditional-blocks">Conditional Block</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">export</span> https_proxy=http://example.com:8080</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal --version</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal update</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal list | grep <span class="string">&#x27;^\*&#x27;</span>| <span class="built_in">sort</span> -u | <span class="built_in">wc</span> -l</span></span><br><span class="line">15687</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal list --installed | grep <span class="string">&#x27;^\*&#x27;</span>| <span class="built_in">sort</span> -u | <span class="built_in">wc</span> -l</span></span><br><span class="line">259</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc-pkg list | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -E <span class="string">&#x27;^[a-zA-Z]+&#x27;</span> | <span class="built_in">sort</span> -u | <span class="built_in">wc</span> -l</span></span><br><span class="line">259</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal install --lib Cabal</span></span><br><span class="line">Resolving dependencies...</span><br><span class="line">Up to date</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal install --lib socket</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal install hoogle</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal init --minimal --exe --verbose 3</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal build --enable-optimization=2 --enable-executable-stripping \</span></span><br><span class="line"><span class="language-bash">    --enable-executable-static</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">LOCALAPPDATA%\Programs\stack\x86_64-windows\msys2-20200903\mingw64.exe</span></span><br><span class="line"></span><br><span class="line">pacman -Syuv --noconfirm</span><br><span class="line">pacman -Suv --noconfirm</span><br><span class="line"></span><br><span class="line">pacman -Ss &quot;mingw-w64-x86_64-.*curl&quot;</span><br><span class="line"></span><br><span class="line">pacman -Sv --noconfirm --needed \</span><br><span class="line">    autoconf base-devel bsdtar diffstat git patch tar vim \</span><br><span class="line">    mingw-w64-x86_64-aria2 \</span><br><span class="line">    mingw-w64-x86_64-binutils \</span><br><span class="line">    mingw-w64-x86_64-ca-certificates \</span><br><span class="line">    mingw-w64-x86_64-ccache \</span><br><span class="line">    mingw-w64-x86_64-clang \</span><br><span class="line">    mingw-w64-x86_64-cmake \</span><br><span class="line">    mingw-w64-x86_64-curl \</span><br><span class="line">    mingw-w64-x86_64-diffutils \</span><br><span class="line">    mingw-w64-x86_64-gmp \</span><br><span class="line">    mingw-w64-x86_64-mpc \</span><br><span class="line">    mingw-w64-x86_64-mpfr \</span><br><span class="line">    mingw-w64-x86_64-libmariadbclient \</span><br><span class="line">    mingw-w64-x86_64-librdkafka \</span><br><span class="line">    mingw-w64-x86_64-libtool \</span><br><span class="line">    mingw-w64-x86_64-lld \</span><br><span class="line">    mingw-w64-x86_64-llvm \</span><br><span class="line">    mingw-w64-x86_64-make \</span><br><span class="line">    mingw-w64-x86_64-ncurses \</span><br><span class="line">    mingw-w64-x86_64-ninja \</span><br><span class="line">    mingw-w64-x86_64-openssl \</span><br><span class="line">    mingw-w64-x86_64-pcre \</span><br><span class="line">    mingw-w64-x86_64-pcre2 \</span><br><span class="line">    mingw-w64-x86_64-postgresql \</span><br><span class="line">    mingw-w64-x86_64-python \</span><br><span class="line">    mingw-w64-x86_64-tools-git \</span><br><span class="line">    mingw-w64-x86_64-xz \</span><br><span class="line">    mingw-w64-x86_64-zlib \</span><br><span class="line">    mingw-w64-x86_64-zstd</span><br><span class="line"></span><br><span class="line">pacman -Q</span><br><span class="line">pacman -Ql mingw-w64-x86_64-llvm</span><br><span class="line">pacman -Qo clang-format.exe</span><br><span class="line"></span><br><span class="line">LC_ALL=C pacman -Qi \</span><br><span class="line">    | awk &#x27;/^Name/&#123;name=$3&#125; /^Installed Size/&#123;print $4$5, name&#125;&#x27; \</span><br><span class="line">    | sort -h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pacman -Scc --noconfirm</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">paccache -r -k 0</span></span><br></pre></td></tr></table></figure>

<h3 id="Hello-Stack"><a href="#Hello-Stack" class="headerlink" title="Hello Stack"></a>Hello Stack</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">export https_proxy=http://example.com:8080</span><br><span class="line"></span><br><span class="line">stack --version</span><br><span class="line"></span><br><span class="line">stack config set system-ghc --global true</span><br><span class="line">stack config set install-ghc --global false</span><br><span class="line"></span><br><span class="line">stack update</span><br><span class="line"></span><br><span class="line">stack --resolver lts --install-ghc exec -- ghc --version      [8.10.4]</span><br><span class="line">stack --resolver lts-17 --install-ghc exec -- ghc --version   [8.10.4]</span><br><span class="line">stack --resolver lts-16 --install-ghc exec -- ghc --version   [8.8.4]</span><br><span class="line"></span><br><span class="line">stack setup 8.10.4</span><br><span class="line"></span><br><span class="line">stack setup --system-ghc --resolver lts-17.7</span><br><span class="line"></span><br><span class="line">stack build --copy-bins hindent</span><br><span class="line"></span><br><span class="line">stack new hello-world simple</span><br><span class="line">stack ghci</span><br><span class="line">stack build</span><br><span class="line">stack exec my-project</span><br><span class="line"></span><br><span class="line">stack install --resolver lts hlint hindent</span><br><span class="line"></span><br><span class="line">stack exec ghc-pkg -- list</span><br><span class="line"></span><br><span class="line">ghc-pkg list</span><br><span class="line">ghc-pkg dot</span><br></pre></td></tr></table></figure>

<h2 id="The-Stable-Haskell-package-sets"><a href="#The-Stable-Haskell-package-sets" class="headerlink" title="The Stable Haskell package sets"></a>The Stable Haskell package sets</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/">Stable Haskell package sets</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/lts">LTS Latest</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/lts-17">LTS 17@2021-03-20, GHC 8.10.4, base 4.14.1, 2659 packages</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/lts-16">LTS 16@2021-01-17, GHC 8.8.4, base 4.13.0, 2512 packages</a></li>
<li><a target="_blank" rel="noopener" href="https://www.stackage.org/lts-14">LTS 14@2020-02-15, GHC 8.6.5, base 4.12.0, 2474 packages</a></li>
</ul>
<h2 id="The-Popular-Haskell-Packages"><a href="#The-Popular-Haskell-Packages" class="headerlink" title="The Popular Haskell Packages"></a>The Popular Haskell Packages</h2><h3 id="Sites"><a href="#Sites" class="headerlink" title="Sites"></a>Sites</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/krispo/awesome-haskell">Awesome Haskell - Konstantin</a></li>
<li><a target="_blank" rel="noopener" href="https://haskell.libhunt.com/">Awesome Haskell - LibHunt</a></li>
<li><a target="_blank" rel="noopener" href="https://www.libhunt.com/l/haskell">Top 20 Haskell Projects by mentions</a></li>
<li><a target="_blank" rel="noopener" href="http://hackage.haskell.org/packages/">Packages by category</a></li>
<li><a target="_blank" rel="noopener" href="https://hackage.haskell.org/packages/top">Top Downloaded packages</a></li>
</ul>
<h3 id="Standard-Packages"><a href="#Standard-Packages" class="headerlink" title="Standard Packages"></a>Standard Packages</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/opt/ghc-8.10/lib/ghc-8.10.4/lib/package.conf.d</span><br><span class="line">    Cabal-3.2.1.0</span><br><span class="line">    array-0.5.4.0</span><br><span class="line">    base-4.14.1.0</span><br><span class="line">    binary-0.8.8.0</span><br><span class="line">    bytestring-0.10.12.0</span><br><span class="line">    containers-0.6.2.1</span><br><span class="line">    deepseq-1.4.4.0</span><br><span class="line">    directory-1.3.6.0</span><br><span class="line">    exceptions-0.10.4</span><br><span class="line">    filepath-1.4.2.1</span><br><span class="line">    ghc-8.10.4</span><br><span class="line">    ghc-boot-8.10.4</span><br><span class="line">    ghc-boot-th-8.10.4</span><br><span class="line">    ghc-compact-0.1.0.0</span><br><span class="line">    ghc-heap-8.10.4</span><br><span class="line">    ghc-prim-0.6.1</span><br><span class="line">    ghci-8.10.4</span><br><span class="line">    haskeline-0.8.0.1</span><br><span class="line">    hpc-0.6.1.0</span><br><span class="line">    integer-gmp-1.0.3.0</span><br><span class="line">    libiserv-8.10.4</span><br><span class="line">    mtl-2.2.2</span><br><span class="line">    parsec-3.1.14.0</span><br><span class="line">    pretty-1.1.3.6</span><br><span class="line">    process-1.6.9.0</span><br><span class="line">    rts-1.0</span><br><span class="line">    stm-2.5.0.0</span><br><span class="line">    template-haskell-2.16.0.0</span><br><span class="line">    terminfo-0.4.1.4</span><br><span class="line">    text-1.2.4.1</span><br><span class="line">    time-1.9.3</span><br><span class="line">    transformers-0.5.6.2</span><br><span class="line">    unix-2.7.2.2</span><br><span class="line">    xhtml-3000.2.2.1</span><br></pre></td></tr></table></figure>

<h3 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/aeson">aeson</a>: Fast JSON parsing and encoding</li>
<li><a target="_blank" rel="noopener" href="https://github.com/simonmar/alex">Alex</a>: A lexical analyser generator for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/simonmar/async">async</a>: Run IO operations asynchronously and wait for their results</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/attoparsec">attoparsec</a>: Fast combinator parsing for bytestrings and text</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">auto-update</a>: Efficiently run periodic, on-demand actions</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/base16-bytestring">base16-bytestring</a>: Fast base16 (hexadecimal) encoding and decoding for Haskell bytestrings</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/base64-bytestring">base64-bytestring</a>: Fast base64 encoding and decoding for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/kolmodin/binary">binary</a>: Binary serialisation for Haskell values using lazy ByteStrings</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/bytestring">bytestring</a>: Fast, compact, strict and lazy byte strings with a list interface</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/conduit">conduit</a>: Streaming data processing library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ludat/conferer">Conferer</a>: Configuration managment for haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/containers">containers</a>: Assorted concrete container types</li>
<li><a target="_blank" rel="noopener" href="https://gitlab.com/twittner/cql-io/">cql-io</a>: Cassandra CQL client</li>
<li><a target="_blank" rel="noopener" href="https://gitlab.com/twittner/cql/">cql</a>: cql: Cassandra CQL binary protocol</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/criterion">criterion</a>: Robust, reliable performance measurement and analysis</li>
<li><a target="_blank" rel="noopener" href="https://github.com/iand675/datadog">datadog</a>: Haskell DataDog client library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/deepseq">deepseq</a>: Deep evaluation of data structures</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/directory">directory</a>: Platform-agnostic library for filesystem operations</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/fgl">fgl</a>: A Functional Graph Library for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/filepath">filepath</a>: Library for manipulating FilePaths in a cross platform way</li>
<li><a target="_blank" rel="noopener" href="https://github.com/vincenthz/hs-gauge">gauge</a>: Lean Haskell Benchmarking</li>
<li><a target="_blank" rel="noopener" href="https://github.com/simonmar/happy">Happy</a>: The Parser Generator for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/facebook/Haxl">Haxl</a>: Simplifies access to remote data.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/hoopl">hoopl</a>: Higher-order optimization library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/sol/hpack">hpack</a>: A modern format for Haskell packages</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/hsc2hs">hsc2hs</a>: Haskell Pre-processor for C FFI bindings</li>
<li><a target="_blank" rel="noopener" href="https://github.com/hspec/hspec">hspec</a>: A Testing Framework for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/http-client">http-client-openssl</a>: http-client backend using the OpenSSL library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/http-client">http-client-tls</a>: http-client backend using the connection package and tls library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/http-client">http-client</a>: An HTTP client engine</li>
<li><a target="_blank" rel="noopener" href="https://github.com/aesiniath/http-streams">http-streams</a>: An HTTP client using io-streams</li>
<li><a target="_blank" rel="noopener" href="https://github.com/kazu-yamamoto/http2">http2</a>: HTTP&#x2F;2 library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-works/hw-json/">hw-json</a>: Memory efficient JSON parser</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-works/hw-simd">hw-simd</a>: Library of simd functions</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-works/hw-xml">hw-xml</a>: XML parser based on succinct data structures</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/inline-c">inline-c</a>: Haskell and C can be freely intermixed in the same source file</li>
<li><a target="_blank" rel="noopener" href="http://github.com/kazu-yamamoto/iproute">iproute</a>: A Simple Routing Table Structure for CIDR</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ekmett/lens/">lens</a>: Lenses, Folds and Traversals</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/math-functions">math-functions</a>: Special mathematical functions</li>
<li><a target="_blank" rel="noopener" href="https://github.com/TokTok/hs-msgpack-binary">msgpack-binary</a>: A Haskell implementation of MessagePack</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">mime-types</a>: Basic mime-type handling types and functions</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/mtl">mtl</a>: The Monad Transformer Library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/mwc-random">mwc-random</a>: Fast, high quality pseudo random number generation</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/network-uri">network-uri</a>: URI manipulation facilities</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/network">network</a>: Low-level networking interface</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/odbc">odbc</a>: Haskell binding to the ODBC API, aimed at SQL Server driver</li>
<li><a target="_blank" rel="noopener" href="https://github.com/pcapriotti/optparse-applicative">optparse-applicative</a>: Command line options parsing</li>
<li><a href="ormolu">ormolu</a>: A formatter for Haskell source code</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/parallel">parallel</a>: A library for parallel programming</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/pretty">pretty</a>: Haskell Pretty-printer library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ekmett/semigroups/">primitive</a>: Primitive memory-related operations</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/test-framework">quickcheck</a>: Framework for running and organising tests, with HUnit and QuickCheck support</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/random">random</a>: Pseudo-random number generation</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mrkkrp/req">req</a>: Easy-to-use, type-safe, expandable, high-level HTTP client library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/commercialhaskell/rio">rio</a>: A standard library for Haskell</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/safe-exceptions">safe-exceptions</a>: safe-exceptions: Safe, consistent, and easy exception handling</li>
<li><a target="_blank" rel="noopener" href="https://github.com/well-typed/cborg">serialise</a>: Binary serialisation in the CBOR format</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-servant/servant">servant-server</a>: A family of combinators for defining webservices APIs and serving them</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-servant/servant">servant</a>: A family of combinators for defining webservices APIs</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snapframework/snap-server">snap-server</a>: Snap Framework HTTP Server Library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lpeterse/haskell-socket">socket</a>: POSIX sockets API</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/stm">stm</a>: Software Transactional Memory</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/tar">tar</a>: Reading, writing and manipulating “.tar” archive files</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">time-manager</a>: Scalable timer</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/time">time</a>: A Time, clocks and calendars library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/vincenthz/hs-tls">tls-session-manager</a>: In-memory TLS session manager</li>
<li><a target="_blank" rel="noopener" href="https://github.com/vincenthz/hs-tls">tls</a>: Native Haskell TLS and SSL protocol implementation for server and client</li>
<li><a target="_blank" rel="noopener" href="https://hackage.haskell.org/package/transformers">transformers</a>: Monad transformers</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/typed-process">typed-process</a>: Run external processes, with strong typing of streams</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/unliftio">unliftio</a>: Lifting and unlifting IO actions</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell-hvr/uuid">uuid</a>: For creating, comparing, parsing and printing Universally Unique Identifiers</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/vector">vector</a>: Efficient Arrays</li>
<li><a target="_blank" rel="noopener" href="http://github.com/yesodweb/wai">wai-extra</a>: Provides some basic WAI handlers and middleware.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">wai</a>: Web Application Interface</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">warp-quic</a>: WAI handler for HTTP&#x2F;3 based on QUIC</li>
<li><a target="_blank" rel="noopener" href="https://github.com/fpco/weigh">weigh</a>: Memory benchmarking</li>
<li><a target="_blank" rel="noopener" href="https://github.com/yesodweb/wai">wrap</a>: A fast, light-weight web server for WAI applications</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/wreq">wreq</a>: An easy-to-use HTTP client library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/xhtml">xhtml</a>: XHTML combinator library</li>
<li><a target="_blank" rel="noopener" href="https://github.com/snoyberg/yaml">yaml</a>: Parsing and rendering YAML</li>
<li><a target="_blank" rel="noopener" href="https://github.com/haskell/zlib">zlib</a>: Compression and decompression in the gzip and zlib formats</li>
<li><a target="_blank" rel="noopener" href="https://github.com/luispedro/hs-zstd">zstd</a>: Haskell bindings to the Zstandard compression algorithm]</li>
</ul>
<h2 id="Tricks-to-Fight-Pain"><a href="#Tricks-to-Fight-Pain" class="headerlink" title="Tricks to Fight Pain"></a>Tricks to Fight Pain</h2><h3 id="Static-Linking"><a href="#Static-Linking" class="headerlink" title="Static Linking"></a>Static Linking</h3><p><strong>Alpine Linux</strong> use musl libc, it can generate statically-linked programs correctly, see <a target="_blank" rel="noopener" href="https://github.com/utdemir/ghc-musl">ghc-musl</a> for more details. <strong>GNU C Library (glibc)</strong> based distributions have this blocker issue <a target="_blank" rel="noopener" href="https://gitlab.haskell.org/ghc/ghc/-/issues/19029">Wrong order of <code>-lc</code> and <code>-lpthread</code> when building a static binary</a>.</p>
<h3 id="ghc-pkg-and-cabal-does-not-list-user-installed-packages"><a href="#ghc-pkg-and-cabal-does-not-list-user-installed-packages" class="headerlink" title="ghc-pkg and cabal does not list user installed packages"></a>ghc-pkg and cabal does not list user installed packages</h3><p>After you install packages by cabal, you can not found them by <code>cabal list --installed</code>, <a target="_blank" rel="noopener" href="https://gitlab.haskell.org/ghc/ghc/-/issues/17341">this issue</a> had reported to upstream. Here is the workaround.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">~/.ghc/x86_64-linux-8.10.4/environments/default</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">~/.cabal/store/ghc-8.10.4/package.db/package.cache</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use the specified package database</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc-pkg list -f ~/.cabal/store/ghc-8.10.4/package.db</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">fix the default package database</span></span><br><span class="line">rm -fr ~/.ghc/x86_64-linux-8.10.4/environments/default</span><br><span class="line">ln -s ~/.cabal/store/ghc-8.10.4/package.db ~/.ghc/x86_64-linux-8.10.4/package.conf.d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Now it works !</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cabal list --installed | grep <span class="string">&#x27;^\*&#x27;</span>| <span class="built_in">sort</span> -u | <span class="built_in">wc</span> -l</span></span><br><span class="line">259</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc-pkg list | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -E <span class="string">&#x27;^[a-zA-Z]+&#x27;</span> | <span class="built_in">sort</span> -u | <span class="built_in">wc</span> -l</span></span><br><span class="line">259</span><br><span class="line"></span><br><span class="line">ghc-pkg field cql-io depends</span><br><span class="line">ghc-pkg dot | tred | dot -Tpdf &gt; pkgs.pdf</span><br><span class="line">stack dot | dot -Tpng -o wreq.png</span><br></pre></td></tr></table></figure>

<h2 id="GHC-on-Alpine-Linux"><a href="#GHC-on-Alpine-Linux" class="headerlink" title="GHC on Alpine Linux"></a>GHC on Alpine Linux</h2><h3 id="Prepare-Alpine-Linux"><a href="#Prepare-Alpine-Linux" class="headerlink" title="Prepare Alpine Linux"></a>Prepare Alpine Linux</h3><p>Both Docker or chroot are good for us.</p>
<h4 id="Prepare-by-Docker"><a href="#Prepare-by-Docker" class="headerlink" title="Prepare by Docker"></a>Prepare by Docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it --pull always -w /root alpine:3</span><br></pre></td></tr></table></figure>

<h4 id="Prepare-by-Chroot"><a href="#Prepare-by-Chroot" class="headerlink" title="Prepare by Chroot"></a>Prepare by Chroot</h4><ul>
<li><a target="_blank" rel="noopener" href="https://dl-cdn.alpinelinux.org/alpine/v3.13/releases/x86_64/alpine-minirootfs-3.13.2-x86_64.tar.gz">Alpine Linux 3.13 Minimal root filesystem</a></li>
<li><a target="_blank" rel="noopener" href="https://dl-cdn.alpinelinux.org/alpine/v3.12/releases/x86_64/alpine-minirootfs-3.12.4-x86_64.tar.gz">Alpine Linux 3.12 Minimal root filesystem</a></li>
<li><a target="_blank" rel="noopener" href="https://dl-cdn.alpinelinux.org/alpine/v3.11/releases/x86_64/alpine-minirootfs-3.11.8-x86_64.tar.gz">Alpine Linux 3.11 Minimal root filesystem</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">export LFS=~/x86_64-alpine-linux</span><br><span class="line">rm -fr $&#123;LFS&#125; &amp;&amp; mkdir -p $&#123;LFS&#125; &amp;&amp; \</span><br><span class="line">cd $&#123;LFS&#125; &amp;&amp; \</span><br><span class="line">  curl -sSL https://dl-cdn.alpinelinux.org/alpine/v3.13/releases/x86_64/alpine-minirootfs-3.13.2-x86_64.tar.gz \</span><br><span class="line">    | tar -xz</span><br><span class="line"></span><br><span class="line">cp /etc/resolv.conf  $LFS/etc</span><br><span class="line"></span><br><span class="line">mknod -m 600 $LFS/dev/console c 5 1</span><br><span class="line">mknod -m 666 $LFS/dev/null c 1 3</span><br><span class="line"></span><br><span class="line">mount -v --bind /dev $LFS/dev</span><br><span class="line">mount -v --bind /dev/pts $LFS/dev/pts</span><br><span class="line">mount -vt proc proc $LFS/proc</span><br><span class="line">mount -vt sysfs sysfs $LFS/sys</span><br><span class="line">mount -vt tmpfs tmpfs $LFS/run</span><br><span class="line"></span><br><span class="line">cd $LFS/root &amp;&amp; chroot &quot;$LFS&quot; /usr/bin/env -i   \</span><br><span class="line">    HOME=/root                  \</span><br><span class="line">    TERM=&quot;$TERM&quot;                \</span><br><span class="line">    PS1=&#x27;\u:\w\$ &#x27; \</span><br><span class="line">    PATH=/opt/ghc-8.10/bin:/bin:/usr/bin:/sbin:/usr/sbin \</span><br><span class="line">    /bin/sh --login</span><br></pre></td></tr></table></figure>

<h3 id="Install-Haskell"><a href="#Install-Haskell" class="headerlink" title="Install Haskell"></a>Install Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">export PS1=&quot;\[\e[31m\][\[\e[m\]\[\e[38;5;172m\]\u\[\e[m\]@\[\e[38;5;153m\]\h\[\e[m\] \[\e[38;5;214m\]\W\[\e[m\]\[\e[31m\]]\[\e[m\]\\$ &quot;</span><br><span class="line">export PATH=/opt/ghc-8.10/bin:/bin:/usr/bin:/sbin:/usr/sbin</span><br><span class="line"></span><br><span class="line">cd /root/</span><br><span class="line">apk update &amp;&amp; apk upgrade &amp;&amp; \</span><br><span class="line">apk add abuild autoconf automake binutils-gold build-base clang cmake coreutils \</span><br><span class="line">    curl doxygen file g++ git gnupg grep lld llvm make python3 samurai sudo tar \</span><br><span class="line">    vim wget xz \</span><br><span class="line">    curl-dev curl-static expat-dev expat-static gmp-dev json-c-dev jsoncpp-dev \</span><br><span class="line">    jsoncpp-static libdwarf-dev libdwarf-static libffi-dev librdkafka-dev \</span><br><span class="line">    librdkafka-static libunwind-dev libunwind-static libxml2-dev mariadb-dev \</span><br><span class="line">    mariadb-static musl-dev ncurses-dev ncurses-static numactl-dev openssl-dev \</span><br><span class="line">    openssl-libs-static pcre-dev pcre2-dev postgresql-dev xz-dev yaml-dev \</span><br><span class="line">    yaml-static zlib-dev zlib-static zstd-dev zstd-static</span><br><span class="line"></span><br><span class="line">apk info -L musl-dev | sort</span><br><span class="line"></span><br><span class="line">wget -q -O - https://downloads.haskell.org/~cabal/cabal-install-latest/cabal-install-3.4.0.0-x86_64-alpine-3.11.6-static-noofd.tar.xz \</span><br><span class="line">  | tar -xvJ</span><br><span class="line">mv cabal /usr/bin</span><br><span class="line"></span><br><span class="line">wget -q -O - https://github.com/commercialhaskell/stack/releases/download/v2.5.1/stack-2.5.1-linux-x86_64.tar.gz \</span><br><span class="line">  | tar -xz</span><br><span class="line">mv stack-2.5.1-linux-x86_64/stack /usr/bin</span><br><span class="line">rm -fr stack-2.5.1-linux-x86_64</span><br><span class="line"></span><br><span class="line">wget -q -O - https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-alpine3.10-linux-integer-simple.tar.xz \</span><br><span class="line">  | tar -xJ</span><br><span class="line"></span><br><span class="line">cd ghc-8.10.4-x86_64-unknown-linux/</span><br><span class="line">./configure --prefix=/opt/ghc-8.10</span><br><span class="line">make install &amp;&amp; cd .. &amp;&amp; rm -fr ghc-8.10.4-x86_64-unknown-linux/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> PATH=/opt/ghc-9.0/bin:/bin:/usr/bin:/sbin:/usr/sbin</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># wget -q -O - https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-alpine3.10-linux-integer-simple.tar.xz \</span></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   | tar -xJ</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> ghc-9.0.1-x86_64-unknown-linux/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">./configure --prefix=/opt/ghc-9.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install &amp;&amp; <span class="built_in">cd</span> .. &amp;&amp; <span class="built_in">rm</span> -fr ghc-9.0.1-x86_64-unknown-linux/</span></span><br></pre></td></tr></table></figure>

<h3 id="Using-Haskell"><a href="#Using-Haskell" class="headerlink" title="Using Haskell"></a>Using Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --version</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --show-options</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --info</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; HelloWorld.hs</span></span></span><br><span class="line">module Main where</span><br><span class="line">main = putStrLn &quot;Hello, World!&quot;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl-s</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">./HelloWorld</span></span></span><br><span class="line">Hello, World !</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ks HelloWorld</span></span></span><br><span class="line">5060    HelloWorld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">file HelloWorld</span></span></span><br><span class="line">HelloWorld: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,</span><br><span class="line">interpreter /lib/ld-musl-x86_64.so.1, stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">ldd HelloWorld</span></span></span><br><span class="line">        /lib/ld-musl-x86_64.so.1 (0x7f9320ec0000)</span><br><span class="line">        libgmp.so.10 =&gt; /usr/lib/libgmp.so.10 (0x7f9320e5a000)</span><br><span class="line">        libc.musl-x86_64.so.1 =&gt; /lib/ld-musl-x86_64.so.1 (0x7f9320ec0000)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl-s -optc-static -optl-static</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">./HelloWorld</span></span></span><br><span class="line">Hello, World !</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ks HelloWorld</span></span></span><br><span class="line">5472    HelloWorld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">file HelloWorld</span></span></span><br><span class="line">HelloWorld: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms / /opt/ghc-8.10 /opt/ghc-8.10/*</span></span></span><br><span class="line">1488    /</span><br><span class="line">1249    /opt/ghc-8.10</span><br><span class="line">1       /opt/ghc-8.10/bin</span><br><span class="line">1       /opt/ghc-8.10/include</span><br><span class="line">1248    /opt/ghc-8.10/lib</span><br><span class="line">1       /opt/ghc-8.10/mingw</span><br><span class="line">1       /opt/ghc-8.10/share</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms / /opt/ghc-9.0 /opt/ghc-9.0/*</span></span></span><br><span class="line">1972    .</span><br><span class="line">1733    /opt/ghc-9.0</span><br><span class="line">1       /opt/ghc-9.0/bin</span><br><span class="line">1       /opt/ghc-9.0/include</span><br><span class="line">1224    /opt/ghc-9.0/lib</span><br><span class="line">509     /opt/ghc-9.0/share</span><br></pre></td></tr></table></figure>

<h3 id="Cleanup-Alpine-Linux"><a href="#Cleanup-Alpine-Linux" class="headerlink" title="Cleanup Alpine Linux"></a>Cleanup Alpine Linux</h3><p>This just need for the chroot setup.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">umount --recursive $LFS/run</span><br><span class="line">umount --recursive $LFS/sys</span><br><span class="line">umount --recursive $LFS/proc</span><br><span class="line">umount --recursive $LFS/dev/pts</span><br><span class="line">umount --recursive $LFS/dev</span><br></pre></td></tr></table></figure>

<h2 id="GHC-on-SUSE-Linux-15"><a href="#GHC-on-SUSE-Linux-15" class="headerlink" title="GHC on SUSE Linux 15"></a>GHC on SUSE Linux 15</h2><h3 id="Install-Haskell-1"><a href="#Install-Haskell-1" class="headerlink" title="Install Haskell"></a>Install Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">export PS1=&quot;\[\e[31m\][\[\e[m\]\[\e[38;5;172m\]\u\[\e[m\]@\[\e[38;5;153m\]\h\[\e[m\] \[\e[38;5;214m\]\W\[\e[m\]\[\e[31m\]]\[\e[m\]\\$ &quot;</span><br><span class="line">export PATH=/opt/ghc-8.10/bin:/bin:/usr/bin:/sbin:/usr/sbin</span><br><span class="line"></span><br><span class="line">cd /root/</span><br><span class="line"></span><br><span class="line">curl -sSLO http://ftp.debian.org/debian/pool/main/n/ncurses/libtinfo5_6.1+20181013-2+deb10u2_amd64.deb</span><br><span class="line">ar libtinfo5_6.1+20181013-2+deb10u2_amd64.deb</span><br><span class="line">cp -af lib/x86_64-linux-gnu/libtinfo.so.5* /lib64/</span><br><span class="line"></span><br><span class="line">zypper install -y glibc-devel gmp-devel libopenssl-devel libcurl-devel \</span><br><span class="line">  zlib-devel libzstd-devel xz-devel ncurses-devel pcre-devel pcre2-devel</span><br><span class="line"></span><br><span class="line">curl -sSL https://downloads.haskell.org/~cabal/cabal-install-3.4.0.0/cabal-install-3.4.0.0-x86_64-alpine-3.11.6-static-noofd.tar.xz \</span><br><span class="line">  | tar -xJ</span><br><span class="line">mv cabal /usr/bin</span><br><span class="line"></span><br><span class="line">curl -sSL https://github.com/commercialhaskell/stack/releases/download/v2.5.1/stack-2.5.1-linux-x86_64.tar.gz \</span><br><span class="line">  | tar -xz</span><br><span class="line">mv stack-2.5.1-linux-x86_64/stack /usr/bin</span><br><span class="line">rm -fr stack-2.5.1-linux-x86_64</span><br><span class="line"></span><br><span class="line">curl -sSL https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-deb9-linux.tar.xz \</span><br><span class="line">  | tar -xJ</span><br><span class="line"></span><br><span class="line">cd ghc-8.10.4/</span><br><span class="line">CC=gcc-10 ./configure --prefix=/opt/ghc-8.10</span><br><span class="line">make install &amp;&amp; cd .. &amp;&amp; rm -fr ghc-8.10.4/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> PATH=/opt/ghc-9.0/bin:/bin:/usr/bin:/sbin:/usr/sbin</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># curl -sSL https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-deb9-linux.tar.xz \</span></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   | tar -xJ</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> ghc-9.0.1/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CC=gcc-10 ./configure --prefix=/opt/ghc-9.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install &amp;&amp; <span class="built_in">cd</span> .. &amp;&amp; <span class="built_in">rm</span> -fr ghc-9.0.1/</span></span><br></pre></td></tr></table></figure>

<h3 id="Using-Haskell-1"><a href="#Using-Haskell-1" class="headerlink" title="Using Haskell"></a>Using Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --version</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --show-options</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --info</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; HelloWorld.hs</span></span></span><br><span class="line">module Main where</span><br><span class="line">main = putStrLn &quot;Hello, World!&quot;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">  ghc HelloWorld.hs -O2 -optl-s</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">./HelloWorld</span></span></span><br><span class="line">Hello, World !</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ks HelloWorld</span></span></span><br><span class="line">732     HelloWorld  [ghc 8.10.4]</span><br><span class="line">744     HelloWorld  [ghc 9.0.1]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">file HelloWorld</span></span></span><br><span class="line">HelloWorld: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,</span><br><span class="line">interpreter /lib64/ld-linux-x86-64.so.2,</span><br><span class="line">BuildID[sha1]=9f1540564ef645a459ee1e01dfd6e9b207c979c5, for GNU/Linux 3.2.0, stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">ldd HelloWorld</span></span></span><br><span class="line">        linux-vdso.so.1 (0x00007ffff93f9000)</span><br><span class="line">        libgmp.so.10 =&gt; /usr/lib64/libgmp.so.10 (0x00007f69d66c0000)</span><br><span class="line">        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f69d6305000)</span><br><span class="line">        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f69d5fcd000)</span><br><span class="line">        librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f69d5dc5000)</span><br><span class="line">        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f69d5bc1000)</span><br><span class="line">        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f69d59a2000)</span><br><span class="line">        /lib64/ld-linux-x86-64.so.2 (0x00007f69d6956000)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">/usr/bin/ld.bfd: error: multiple definition of `__lll_lock_wait_private&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl -s -optl -static \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">        -optl -Wl,--allow-multiple-definition</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms /opt/ghc-8.10 /opt/ghc-8.10/*</span></span></span><br><span class="line">2081    /opt/ghc-8.10</span><br><span class="line">1       /opt/ghc-8.10/bin</span><br><span class="line">1795    /opt/ghc-8.10/lib</span><br><span class="line">287     /opt/ghc-8.10/share</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms /opt/ghc-9.0 /opt/ghc-9.0/*</span></span></span><br><span class="line">2077    /opt/ghc-9.0</span><br><span class="line">1       /opt/ghc-9.0/bin</span><br><span class="line">1776    /opt/ghc-9.0/lib</span><br><span class="line">302     /opt/ghc-9.0/share</span><br></pre></td></tr></table></figure>

<h2 id="GHC-on-RHEL-8"><a href="#GHC-on-RHEL-8" class="headerlink" title="GHC on RHEL 8"></a>GHC on RHEL 8</h2><h3 id="Install-Haskell-2"><a href="#Install-Haskell-2" class="headerlink" title="Install Haskell"></a>Install Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">export PS1=&quot;\[\e[31m\][\[\e[m\]\[\e[38;5;172m\]\u\[\e[m\]@\[\e[38;5;153m\]\h\[\e[m\] \[\e[38;5;214m\]\W\[\e[m\]\[\e[31m\]]\[\e[m\]\\$ &quot;</span><br><span class="line">export PATH=/opt/ghc-8.10/bin:/bin:/usr/bin:/sbin:/usr/sbin</span><br><span class="line"></span><br><span class="line">cd /root/</span><br><span class="line"></span><br><span class="line">sudo dnf install -y glibc-devel gmp-devel openssl-devel curl-devel \</span><br><span class="line">  zlib-devel libzstd-devel xz-devel ncurses-devel pcre-devel pcre2-devel</span><br><span class="line"></span><br><span class="line">curl -sSL https://downloads.haskell.org/~cabal/cabal-install-3.4.0.0/cabal-install-3.4.0.0-x86_64-alpine-3.11.6-static-noofd.tar.xz \</span><br><span class="line">  | tar -xJ</span><br><span class="line">mv cabal /usr/bin</span><br><span class="line"></span><br><span class="line">curl -sSL https://github.com/commercialhaskell/stack/releases/download/v2.5.1/stack-2.5.1-linux-x86_64.tar.gz \</span><br><span class="line">  | tar -xz</span><br><span class="line">mv stack-2.5.1-linux-x86_64/stack /usr/bin</span><br><span class="line">rm -fr stack-2.5.1-linux-x86_64</span><br><span class="line"></span><br><span class="line">curl -sSL https://downloads.haskell.org/~ghc/8.10.4/ghc-8.10.4-x86_64-deb10-linux.tar.xz \</span><br><span class="line">  | tar -xJ</span><br><span class="line"></span><br><span class="line">cd ghc-8.10.4/</span><br><span class="line">./configure --prefix=/opt/ghc-8.10</span><br><span class="line">make install &amp;&amp; cd .. &amp;&amp; rm -fr ghc-8.10.4/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> PATH=/opt/ghc-9.0/bin:/bin:/usr/bin:/sbin:/usr/sbin</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># curl -sSL https://downloads.haskell.org/~ghc/9.0.1/ghc-9.0.1-x86_64-deb10-linux.tar.xz \</span></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   | tar -xJ</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> ghc-9.0.1/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">./configure --prefix=/opt/ghc-9.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install &amp;&amp; <span class="built_in">cd</span> .. &amp;&amp; <span class="built_in">rm</span> -fr ghc-9.0.1/</span></span><br></pre></td></tr></table></figure>

<h3 id="Using-Haskell-2"><a href="#Using-Haskell-2" class="headerlink" title="Using Haskell"></a>Using Haskell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --version</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --show-options</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ghc --info</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; HelloWorld.hs</span></span></span><br><span class="line">module Main where</span><br><span class="line">main = putStrLn &quot;Hello, World!&quot;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">  ghc HelloWorld.hs -O2 -optl-s</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">./HelloWorld</span></span></span><br><span class="line">Hello, World !</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ks HelloWorld</span></span></span><br><span class="line">752     HelloWorld  [ghc 8.10.4]</span><br><span class="line">764     HelloWorld  [ghc 9.0.1]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">file HelloWorld</span></span></span><br><span class="line">HelloWorld: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,</span><br><span class="line">interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0,</span><br><span class="line">BuildID[sha1]=4f23f2d113a7e64e9933897e0d1f21277b84496b, stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">ldd HelloWorld</span></span></span><br><span class="line">        linux-vdso.so.1 (0x00007ffc949f2000)</span><br><span class="line">        libgmp.so.10 =&gt; /lib64/libgmp.so.10 (0x00007f2a4d368000)</span><br><span class="line">        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f2a4cfa5000)</span><br><span class="line">        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f2a4cc23000)</span><br><span class="line">        librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f2a4ca1b000)</span><br><span class="line">        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f2a4c817000)</span><br><span class="line">        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f2a4c5f7000)</span><br><span class="line">        /lib64/ld-linux-x86-64.so.2 (0x00007f2a4d600000)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string"># /usr/bin/ld.bfd: error: multiple definition of `__lll_lock_wait_private&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">rm -f HelloWorld HelloWorld.hi HelloWorld.o &amp;&amp; \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">    ghc HelloWorld.hs -O2 -optl -s -optl -static \</span></span></span><br><span class="line"><span class="string"><span class="language-bash">        -optl -Wl,--allow-multiple-definition</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms /opt/ghc-8.10 /opt/ghc-8.10/*</span></span></span><br><span class="line">2091    /opt/ghc-8.10</span><br><span class="line">1       /opt/ghc-8.10/bin</span><br><span class="line">1805    /opt/ghc-8.10/lib</span><br><span class="line">287     /opt/ghc-8.10/share</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">du -ms /opt/ghc-9.0 /opt/ghc-9.0/*</span></span></span><br><span class="line">2103    /opt/ghc-9.0</span><br><span class="line">1       /opt/ghc-9.0/bin</span><br><span class="line">1801    /opt/ghc-9.0/lib</span><br><span class="line">303     /opt/ghc-9.0/share</span><br></pre></td></tr></table></figure>

<h2 id="Program-Structure"><a href="#Program-Structure" class="headerlink" title="Program Structure"></a>Program Structure</h2><p>Every complete Haskell program must define main in module Main in package main.</p>
<ol>
<li><p>At the topmost level a Haskell program is a set of modules. Modules provide a way to control namespaces and to re-use software in large programs.</p>
</li>
<li><p>The top level of a module consists of a collection of declarations, of which there are several kinds. Declarations define things such as ordinary values, datatypes, type classes, and fixity information.</p>
</li>
<li><p>At the next lower level are expressions. An expression denotes a value and has a static type; expressions are at the heart of Haskell programming “in the small.”</p>
</li>
<li><p>At the bottom level is Haskell’s lexical structure. The lexical structure captures the concrete representation of Haskell programs in text files.</p>
</li>
</ol>
<h2 id="Language-extensions"><a href="#Language-extensions" class="headerlink" title="Language extensions"></a>Language extensions</h2><p>50% of all production Haskell code is language extension and import lines</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#123;-# LANGUAGE OverloadedStrings #-&#125;</span></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE DeriveFunctor #-&#125;</span></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE GADTs #-&#125;</span></span><br></pre></td></tr></table></figure>

<p>Added at the top of your file. Basic structure:</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env stack</span></span><br><span class="line"><span class="comment">-- stack --resolver lts-16.31 script</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE OverloadedStrings #-&#125;</span></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE DeriveFunctor #-&#125;</span></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE GADTs #-&#125;</span></span><br><span class="line"><span class="meta">&#123;-# LANGUAGE LambdaCase #-&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> Main (<span class="title">main</span>) <span class="keyword">where</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Control.Monad (<span class="title">when</span>)</span><br><span class="line"><span class="comment">-- import ...</span></span><br><span class="line"></span><br><span class="line"><span class="title">main</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">main</span> = putStrLn <span class="string">&quot;Finally, some actual code!&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><p>A module defines a collection of values, datatypes, type synonyms, classes, etc., in an environment created by a set of imports (resources brought into scope from other modules). It exports some of these resources, making them available to other modules. We use the term entity to refer to a value, type, or class defined in, imported into, or perhaps exported from a module.</p>
<p>A Haskell program is a collection of modules, one of which, by convention, must be called Main and must export the value main. The value of the program is the value of the identifier main in module Main, which must be a computation of type IO τ for some type τ. When the program is executed, the computation main is performed, and its result (of type τ) is discarded.</p>
<h3 id="Module-Structure"><a href="#Module-Structure" class="headerlink" title="Module Structure"></a>Module Structure</h3><p>A module defines a mutually recursive scope containing declarations for value bindings, data types, type synonyms, classes, etc.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module  →  module modid [exports] where body</span><br><span class="line"> |  body</span><br><span class="line">body  →  &#123; impdecls ; topdecls &#125;</span><br><span class="line"> |  &#123; impdecls &#125;</span><br><span class="line"> |  &#123; topdecls &#125;</span><br><span class="line"></span><br><span class="line">impdecls  →  impdecl1 ; … ; impdecln      (n ≥ 1)</span><br><span class="line">topdecls  →  topdecl1 ; … ; topdecln      (n ≥ 1)</span><br></pre></td></tr></table></figure>

<p>A module begins with a header: the keyword module, the module name, and a list of entities (enclosed in round parentheses) to be exported. The header is followed by a possibly-empty list of import declarations that specify modules to be imported, optionally restricting the imported bindings. This is followed by a possibly-empty list of top-level declarations.</p>
<p>An abbreviated form of module, consisting only of the module body, is permitted. If this is used, the header is assumed to be ‘<strong>module Main(main) where</strong>’. If the first lexeme in the abbreviated module is not a {, then the layout rule applies for the top level of the module.</p>
<h3 id="Export-Lists"><a href="#Export-Lists" class="headerlink" title="Export Lists"></a>Export Lists</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">exports  →  ( export1 , … , exportn [ , ] )      (n ≥ 0)</span><br><span class="line"></span><br><span class="line">export  →  qvar</span><br><span class="line"> |  qtycon [(..) | ( cname1 , … , cnamen )]      (n ≥ 0)</span><br><span class="line"> |  qtycls [(..) | ( var1 , … , varn )]      (n ≥ 0)</span><br><span class="line"> |  module modid</span><br><span class="line"></span><br><span class="line">cname  →  var | con</span><br></pre></td></tr></table></figure>

<p>An export list identifies the entities to be exported by a module declaration. A module implementation may only export an entity that it declares, or that it imports from some other module. If the export list is omitted, all values, types and classes defined in the module are exported, but not those that are imported.</p>
<h3 id="Import-Declarations"><a href="#Import-Declarations" class="headerlink" title="Import Declarations"></a>Import Declarations</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">impdecl  →  import [qualified] modid [as modid] [impspec]</span><br><span class="line"> |       (empty declaration)</span><br><span class="line">impspec  →  ( import1 , … , importn [ , ] )      (n ≥ 0)</span><br><span class="line"> |  hiding ( import1 , … , importn [ , ] )      (n ≥ 0)</span><br><span class="line"></span><br><span class="line">import  →  var</span><br><span class="line"> |  tycon [ (..) | ( cname1 , … , cnamen )]      (n ≥ 0)</span><br><span class="line"> |  tycls [(..) | ( var1 , … , varn )]      (n ≥ 0)</span><br><span class="line">cname  →  var | con</span><br></pre></td></tr></table></figure>

<p>The entities exported by a module may be brought into scope in another module with an import declaration at the beginning of the module. The import declaration names the module to be imported and optionally specifies the entities to be imported. A single module may be imported by more than one import declaration. Imported names serve as top level declarations: they scope over the entire body of the module but may be shadowed by local non-top-level bindings.</p>
<p>The effect of multiple import declarations is strictly cumulative: an entity is in scope if it is imported by any of the import declarations in a module. The ordering of import declarations is irrelevant.</p>
<p>Lexically, the terminal symbols “as”, “qualified” and “hiding” are each a varid rather than a reservedid. They have special significance only in the context of an import declaration; they may also be used as variables.</p>
<h3 id="What-is-imported"><a href="#What-is-imported" class="headerlink" title="What is imported"></a>What is imported</h3><p>Exactly which entities are to be imported can be specified in one of the following three ways:</p>
<ol>
<li>The imported entities can be specified explicitly by listing them in parentheses. Items in the list have the same form as those in export lists, except qualifiers are not permitted and the ‘module modid’ entity is not permitted. When the (..) form of import is used for a type or class, the (..) refers to all of the constructors, methods, or field names exported from the module.</li>
</ol>
<p>  The list must name only entities exported by the imported module. The list may be empty, in which case nothing except the instances is imported.</p>
<ol start="2">
<li>Entities can be excluded by using the form hiding(import1 , … , importn ), which specifies that all entities exported by the named module should be imported except for those named in the list. Data constructors may be named directly in hiding lists without being prefixed by the associated type. Thus, in <code>import M hiding (C)</code> any constructor, class, or type named C is excluded. In contrast, using C in an import list names only a class or type.</li>
</ol>
<p>  It is an error to hide an entity that is not, in fact, exported by the imported module.</p>
<ol start="3">
<li>Finally, if impspec is omitted then all the entities exported by the specified module are imported.</li>
</ol>
<h2 id="Lexical-Structure"><a href="#Lexical-Structure" class="headerlink" title="Lexical Structure"></a>Lexical Structure</h2><ul>
<li>Notational Conventions</li>
<li>Lexical Program Structure</li>
<li>Comments</li>
<li>Identifiers and Operators</li>
<li>Numeric Literals</li>
<li>Character and String Literals</li>
<li>Layout</li>
</ul>
<h2 id="Expressions"><a href="#Expressions" class="headerlink" title="Expressions"></a>Expressions</h2><ul>
<li>Errors</li>
<li>Variables, Constructors, Operators, and Literals</li>
<li>Curried Applications and Lambda Abstractions</li>
<li>Operator Applications</li>
<li>Sections</li>
<li>Conditionals</li>
<li>Lists</li>
<li>Tuples</li>
<li>Unit Expressions and Parenthesized Expressions</li>
<li>Arithmetic Sequences</li>
<li>List Comprehensions</li>
<li>Let Expressions</li>
<li>Case Expressions</li>
<li>Do Expressions</li>
<li>Datatypes with Field Labels</li>
<li>Expression Type-Signatures</li>
<li>Pattern Matching</li>
</ul>
<h2 id="Predefined-Types-and-Classes"><a href="#Predefined-Types-and-Classes" class="headerlink" title="Predefined Types and Classes"></a>Predefined Types and Classes</h2><ul>
<li>Standard Haskell Types</li>
<li>Strict Evaluation</li>
<li>Standard Haskell Classes</li>
<li>Numbers</li>
</ul>
<h3 id="Standard-Haskell-Types"><a href="#Standard-Haskell-Types" class="headerlink" title="Standard Haskell Types"></a>Standard Haskell Types</h3><h4 id="Booleans"><a href="#Booleans" class="headerlink" title="Booleans"></a>Booleans</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data  Bool  =  False | True deriving</span><br><span class="line">                             (Read, Show, Eq, Ord, Enum, Bounded)</span><br></pre></td></tr></table></figure>

<p>The boolean type <strong>Bool</strong> is an enumeration. The basic boolean functions are &amp;&amp; (and), || (or), and not. The name <strong>otherwise</strong> is defined as <strong>True</strong> to make guarded expressions more readable.</p>
<h4 id="Characters-and-Strings"><a href="#Characters-and-Strings" class="headerlink" title="Characters and Strings"></a>Characters and Strings</h4><p>The character type <strong>Char</strong> is an enumeration whose values represent Unicode characters. Type Char is an instance of the classes Read, Show, Eq, Ord, Enum, and Bounded. The toEnum and fromEnum functions, standard functions from class Enum, map characters to and from the Int type.</p>
<p>A <strong>string</strong> is a list of characters:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type  String  =  [Char]</span><br></pre></td></tr></table></figure>

<h4 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data  [a]  =  [] | a : [a]  deriving (Eq, Ord)</span><br></pre></td></tr></table></figure>

<p>Lists are an algebraic datatype of two constructors, although with special syntax. Lists are an instance of classes Read, Show, Eq, Ord, Monad, Functor, and MonadPlus.</p>
<h4 id="Tuples"><a href="#Tuples" class="headerlink" title="Tuples"></a>Tuples</h4><p>Tuples are algebraic datatypes with special syntax. Each tuple type has a single constructor. All tuples are instances of Eq, Ord, Bounded, Read, and Show (provided, of course, that all their component types are).</p>
<p>Haskell implementation must support tuples up to size 15, together with the instances for Eq, Ord, Bounded, Read, and Show. The Prelude and libraries define tuple functions such as zip for tuples up to a size of 7.</p>
<h4 id="The-Unit-Datatype"><a href="#The-Unit-Datatype" class="headerlink" title="The Unit Datatype"></a>The Unit Datatype</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data  () = () deriving (Eq, Ord, Bounded, Enum, Read, Show)</span><br></pre></td></tr></table></figure>

<p>The unit datatype () has one non-⊥ member, the nullary constructor ().</p>
<h4 id="Function-Types"><a href="#Function-Types" class="headerlink" title="Function Types"></a>Function Types</h4><p>Functions are an abstract type: no constructors directly create functional values. The following simple functions are found in the Prelude: id, const, (.), flip, ($), and until.</p>
<h4 id="The-IO-and-IOError-Types"><a href="#The-IO-and-IOError-Types" class="headerlink" title="The IO and IOError Types"></a>The IO and IOError Types</h4><p>The IO type serves as a tag for operations (actions) that interact with the outside world. The IO type is abstract: no constructors are visible to the user. IO is an instance of the Monad and Functor classes.</p>
<p>IOError is an abstract type representing errors raised by I&#x2F;O operations. It is an instance of Show and Eq.</p>
<h4 id="Other-Types"><a href="#Other-Types" class="headerlink" title="Other Types"></a>Other Types</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data  Maybe a     =  Nothing | Just a  deriving (Eq, Ord, Read, Show)</span><br><span class="line">data  Either a b  =  Left a | Right b  deriving (Eq, Ord, Read, Show)</span><br><span class="line">data  Ordering    =  LT | EQ | GT deriving</span><br><span class="line">                                  (Eq, Ord, Bounded, Enum, Read, Show)</span><br></pre></td></tr></table></figure>

<p>The Maybe type is an instance of classes Functor, Monad, and MonadPlus. The Ordering type is used by compare in the class Ord. The functions maybe and either are found in the Prelude.</p>
<h3 id="Standard-Haskell-Classes"><a href="#Standard-Haskell-Classes" class="headerlink" title="Standard Haskell Classes"></a>Standard Haskell Classes</h3><ul>
<li>Eq</li>
<li>Ord</li>
<li>Read and Show</li>
<li>Enum</li>
<li>Functor</li>
<li>Monad</li>
<li>Bounded</li>
<li>Numbers<ul>
<li>Integer (Integral)</li>
<li>Int [−2^29, 2^29−1] (Integral)</li>
<li>Float (RealFloat)</li>
<li>Double (RealFloat)</li>
<li>The class <strong>Integral</strong> contains integers of both limited and unlimited range; the class <strong>Fractional</strong> contains all non-integral types; and the class <strong>Floating</strong> contains all floating-point types, both real and complex.</li>
</ul>
</li>
</ul>
<h2 id="Basic-Input-x2F-Output"><a href="#Basic-Input-x2F-Output" class="headerlink" title="Basic Input&#x2F;Output"></a>Basic Input&#x2F;Output</h2><h3 id="Standard-I-x2F-O-Functions"><a href="#Standard-I-x2F-O-Functions" class="headerlink" title="Standard I&#x2F;O Functions"></a>Standard I&#x2F;O Functions</h3><h4 id="Output-Functions"><a href="#Output-Functions" class="headerlink" title="Output Functions"></a>Output Functions</h4><p>These functions write to the standard output device (this is normally the user’s terminal).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">putChar  :: Char -&gt; IO ()</span><br><span class="line">putStr   :: String -&gt; IO ()</span><br><span class="line">putStrLn :: String -&gt; IO ()  -- adds a newline</span><br><span class="line">print    :: Show a =&gt; a -&gt; IO ()</span><br></pre></td></tr></table></figure>

<h4 id="Input-Functions"><a href="#Input-Functions" class="headerlink" title="Input Functions"></a>Input Functions</h4><p>These functions read input from the standard input device (normally the user’s terminal).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getChar     :: IO Char</span><br><span class="line">getLine     :: IO String</span><br><span class="line">getContents :: IO String</span><br><span class="line">interact    :: (String -&gt; String) -&gt; IO ()</span><br><span class="line">readIO      :: Read a =&gt; String -&gt; IO a</span><br><span class="line">readLn      :: Read a =&gt; IO a</span><br></pre></td></tr></table></figure>

<h4 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h4><p>These functions operate on files of characters. Files are named by strings using some implementation-specific method to resolve strings as file names.</p>
<p>The writeFile and appendFile functions write or append the string, their second argument, to the file, their first argument. The readFile function reads a file and returns the contents of the file as a string. The file is read lazily, on demand, as with getContents.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type FilePath =  String</span><br><span class="line"></span><br><span class="line">writeFile  :: FilePath -&gt; String -&gt; IO ()</span><br><span class="line">appendFile :: FilePath -&gt; String -&gt; IO ()</span><br><span class="line">readFile   :: FilePath           -&gt; IO String</span><br></pre></td></tr></table></figure>

<h3 id="Sequencing-I-x2F-O-Operations"><a href="#Sequencing-I-x2F-O-Operations" class="headerlink" title="Sequencing I&#x2F;O Operations"></a>Sequencing I&#x2F;O Operations</h3><p>The type constructor IO is an instance of the Monad class. The two monadic binding functions, methods in the Monad class, are used to compose a series of I&#x2F;O operations. The &gt;&gt; function is used where the result of the first operation is uninteresting, for example when it is (). The &gt;&gt;&#x3D; operation passes the result of the first operation as an argument to the second operation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&gt;&gt;=) :: IO a -&gt; (a -&gt; IO b) -&gt; IO b</span><br><span class="line">(&gt;&gt;)  :: IO a -&gt; IO b        -&gt; IO b</span><br></pre></td></tr></table></figure>

<h3 id="Exception-Handling-in-the-I-x2F-O-Monad"><a href="#Exception-Handling-in-the-I-x2F-O-Monad" class="headerlink" title="Exception Handling in the I&#x2F;O Monad"></a>Exception Handling in the I&#x2F;O Monad</h3><p>The I&#x2F;O monad includes a simple exception handling system. Any I&#x2F;O operation may raise an exception instead of returning a result.</p>
<p>Exceptions in the I&#x2F;O monad are represented by values of type IOError. This is an abstract type: its constructors are hidden from the user. The IO library defines functions that construct and examine IOError values. The only Prelude function that creates an IOError value is userError. User error values include a string describing the error.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userError :: String -&gt; IOError</span><br></pre></td></tr></table></figure>

<p>Exceptions are raised and caught using the following functions:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ioError :: IOError -&gt; IO a</span><br><span class="line">catch   :: IO a    -&gt; (IOError -&gt; IO a) -&gt; IO a</span><br></pre></td></tr></table></figure>

<h2 id="Foreign-Function-Interface"><a href="#Foreign-Function-Interface" class="headerlink" title="Foreign Function Interface"></a>Foreign Function Interface</h2><ul>
<li>Foreign Languages</li>
<li>Contexts</li>
<li>Lexical Structure</li>
<li>Foreign Declarations<ul>
<li>Calling Conventions</li>
<li>Foreign Types<ul>
<li>Char, Int, Double, Float, and Bool as exported by the Haskell Prelude as well as</li>
<li>Int8, Int16, Int32, Int64, Word8, Word16, Word32, Word64, Ptr a, FunPtr a, and StablePtr a, for any type a, as exported by Foreign</li>
</ul>
</li>
<li>Import Declarations</li>
<li>Export Declarations</li>
</ul>
</li>
<li>Specification of External Entities<ul>
<li>Standard C Calls</li>
<li>Win32 API Calls</li>
</ul>
</li>
<li>Marshalling</li>
<li>The External C Interface</li>
</ul>
<h2 id="Compiler-Pragmas"><a href="#Compiler-Pragmas" class="headerlink" title="Compiler Pragmas"></a>Compiler Pragmas</h2><ul>
<li>Inlining</li>
<li>Specialization</li>
<li>Language extensions</li>
</ul>

      </section>
    </article>
    
    
  </div>
  <aside>
    
    <div class="toc-container">
      <h1>
        catalog
      </h1>
      <div class="content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Haskell-Programming-Language"><span class="toc-number">1.</span> <span class="toc-text">Haskell Programming Language</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Features"><span class="toc-number">1.1.</span> <span class="toc-text">Features</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Overview"><span class="toc-number">1.2.</span> <span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-number">1.3.</span> <span class="toc-text">Usage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Documentation"><span class="toc-number">1.4.</span> <span class="toc-text">Documentation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Download-and-Install"><span class="toc-number">1.5.</span> <span class="toc-text">Download and Install</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Visual-Studio-Code"><span class="toc-number">1.5.1.</span> <span class="toc-text">Visual Studio Code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OS-specific-packages"><span class="toc-number">1.5.2.</span> <span class="toc-text">OS-specific packages</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GHC-on-Debian-10"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">GHC on Debian 10</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Minimal-installation"><span class="toc-number">1.5.3.</span> <span class="toc-text">Minimal installation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GHC"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">GHC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cabal"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">Cabal</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Stack"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">Stack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Haddock"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">Haddock</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-Start"><span class="toc-number">1.6.</span> <span class="toc-text">Quick Start</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker"><span class="toc-number">1.6.1.</span> <span class="toc-text">Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-GHC"><span class="toc-number">1.6.2.</span> <span class="toc-text">Hello GHC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-Cabal"><span class="toc-number">1.6.3.</span> <span class="toc-text">Hello Cabal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-Stack"><span class="toc-number">1.6.4.</span> <span class="toc-text">Hello Stack</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Stable-Haskell-package-sets"><span class="toc-number">1.7.</span> <span class="toc-text">The Stable Haskell package sets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Popular-Haskell-Packages"><span class="toc-number">1.8.</span> <span class="toc-text">The Popular Haskell Packages</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sites"><span class="toc-number">1.8.1.</span> <span class="toc-text">Sites</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard-Packages"><span class="toc-number">1.8.2.</span> <span class="toc-text">Standard Packages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Packages"><span class="toc-number">1.8.3.</span> <span class="toc-text">Packages</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tricks-to-Fight-Pain"><span class="toc-number">1.9.</span> <span class="toc-text">Tricks to Fight Pain</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Static-Linking"><span class="toc-number">1.9.1.</span> <span class="toc-text">Static Linking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ghc-pkg-and-cabal-does-not-list-user-installed-packages"><span class="toc-number">1.9.2.</span> <span class="toc-text">ghc-pkg and cabal does not list user installed packages</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GHC-on-Alpine-Linux"><span class="toc-number">1.10.</span> <span class="toc-text">GHC on Alpine Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Prepare-Alpine-Linux"><span class="toc-number">1.10.1.</span> <span class="toc-text">Prepare Alpine Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Prepare-by-Docker"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">Prepare by Docker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Prepare-by-Chroot"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">Prepare by Chroot</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-Haskell"><span class="toc-number">1.10.2.</span> <span class="toc-text">Install Haskell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-Haskell"><span class="toc-number">1.10.3.</span> <span class="toc-text">Using Haskell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cleanup-Alpine-Linux"><span class="toc-number">1.10.4.</span> <span class="toc-text">Cleanup Alpine Linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GHC-on-SUSE-Linux-15"><span class="toc-number">1.11.</span> <span class="toc-text">GHC on SUSE Linux 15</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-Haskell-1"><span class="toc-number">1.11.1.</span> <span class="toc-text">Install Haskell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-Haskell-1"><span class="toc-number">1.11.2.</span> <span class="toc-text">Using Haskell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GHC-on-RHEL-8"><span class="toc-number">1.12.</span> <span class="toc-text">GHC on RHEL 8</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-Haskell-2"><span class="toc-number">1.12.1.</span> <span class="toc-text">Install Haskell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-Haskell-2"><span class="toc-number">1.12.2.</span> <span class="toc-text">Using Haskell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Program-Structure"><span class="toc-number">1.13.</span> <span class="toc-text">Program Structure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Language-extensions"><span class="toc-number">1.14.</span> <span class="toc-text">Language extensions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Modules"><span class="toc-number">1.15.</span> <span class="toc-text">Modules</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Structure"><span class="toc-number">1.15.1.</span> <span class="toc-text">Module Structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Export-Lists"><span class="toc-number">1.15.2.</span> <span class="toc-text">Export Lists</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Import-Declarations"><span class="toc-number">1.15.3.</span> <span class="toc-text">Import Declarations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-imported"><span class="toc-number">1.15.4.</span> <span class="toc-text">What is imported</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lexical-Structure"><span class="toc-number">1.16.</span> <span class="toc-text">Lexical Structure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Expressions"><span class="toc-number">1.17.</span> <span class="toc-text">Expressions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Predefined-Types-and-Classes"><span class="toc-number">1.18.</span> <span class="toc-text">Predefined Types and Classes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard-Haskell-Types"><span class="toc-number">1.18.1.</span> <span class="toc-text">Standard Haskell Types</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Booleans"><span class="toc-number">1.18.1.1.</span> <span class="toc-text">Booleans</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Characters-and-Strings"><span class="toc-number">1.18.1.2.</span> <span class="toc-text">Characters and Strings</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lists"><span class="toc-number">1.18.1.3.</span> <span class="toc-text">Lists</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tuples"><span class="toc-number">1.18.1.4.</span> <span class="toc-text">Tuples</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-Unit-Datatype"><span class="toc-number">1.18.1.5.</span> <span class="toc-text">The Unit Datatype</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Function-Types"><span class="toc-number">1.18.1.6.</span> <span class="toc-text">Function Types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-IO-and-IOError-Types"><span class="toc-number">1.18.1.7.</span> <span class="toc-text">The IO and IOError Types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Other-Types"><span class="toc-number">1.18.1.8.</span> <span class="toc-text">Other Types</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard-Haskell-Classes"><span class="toc-number">1.18.2.</span> <span class="toc-text">Standard Haskell Classes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Basic-Input-x2F-Output"><span class="toc-number">1.19.</span> <span class="toc-text">Basic Input&#x2F;Output</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Standard-I-x2F-O-Functions"><span class="toc-number">1.19.1.</span> <span class="toc-text">Standard I&#x2F;O Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Output-Functions"><span class="toc-number">1.19.1.1.</span> <span class="toc-text">Output Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Input-Functions"><span class="toc-number">1.19.1.2.</span> <span class="toc-text">Input Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Files"><span class="toc-number">1.19.1.3.</span> <span class="toc-text">Files</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sequencing-I-x2F-O-Operations"><span class="toc-number">1.19.2.</span> <span class="toc-text">Sequencing I&#x2F;O Operations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exception-Handling-in-the-I-x2F-O-Monad"><span class="toc-number">1.19.3.</span> <span class="toc-text">Exception Handling in the I&#x2F;O Monad</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Foreign-Function-Interface"><span class="toc-number">1.20.</span> <span class="toc-text">Foreign Function Interface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compiler-Pragmas"><span class="toc-number">1.21.</span> <span class="toc-text">Compiler Pragmas</span></a></li></ol></li></ol>
      </div>
    </div>
    
  </aside>
</main>



  <footer>
  <div class="copyright">
    <div>
      &copy;
      2024 | Powered by <a href="https://hexo.io"
        target="_blank">Hexo</a>&nbsp
    </div>
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath"
        target="_blank">Aath</a>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<script src="/lib/ScrollMagic.min.js"></script>


<script src="/lib/lodash.min.js"></script>

<script>
  document.body.addEventListener('touchstart', function () { });

  // 文章图片预览
  $("article img").each(function () {
    var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
    $(this).wrapAll(strA);
  });

  // 目录联动
  let tocLinkList = $('.toc-link')

  let controller = new ScrollMagic.Controller({
    globalSceneOptions: {
      triggerHook: 0.01
    }
  })

  tocLinkList.each(function (index, elem) {
    let href = $(this).attr("href");
    let nextHref = tocLinkList.eq(index + 1).attr("href");
    let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

    new ScrollMagic.Scene({ triggerElement: href })
      .duration(height)
      .setClassToggle(".toc [href='" + href + "']", 'active')
      .addTo(controller)
  })

  window.addEventListener('load', function () {
    // 目录联动 图片加载完成后从新计算
    tocLinkList.each(function (index, elem) {
      let href = $(this).attr("href");
      let nextHref = tocLinkList.eq(index + 1).attr("href");
      let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

      new ScrollMagic.Scene({ triggerElement: href })
        .duration(height)
        .setClassToggle(".toc [href='" + href + "']", 'active')
        .addTo(controller)
    })
  })
</script>

<script src="/lib/jquery.fancybox.min.js"></script>



</body>
</html>
