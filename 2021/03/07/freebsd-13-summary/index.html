<!DOCTYPE html>
<html lang=zh>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="keywords" content="">
  
    <link rel="icon" href="">
  
    
  <title>FreeBSD 13 Summary | 上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</title>
  <meta name="description" content="">
  
<link rel="stylesheet" href="/style.css">

  
<link rel="stylesheet" href="/lib/jquery.fancybox.min.css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>上下未形，何由考之？冥昭瞢暗，誰能極之？馮翼惟象，何以識之？</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
      <section class="content markdown-body">
        <h1>
          FreeBSD 13 Summary
        </h1>
        <div class='post-meta'>
          <i class="fa fa-calendar"
            aria-hidden="true"></i> <time>
            2021/03/07</time>
          
          | <i class="fa fa-folder-open-o"
            aria-hidden="true"></i>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/Operating-system/">Operating system</a>/ <a class="article-category-link" href="/categories/Operating-system/FreeBSD/">FreeBSD</a>
  </div>



          
          
          |
          
          <i class="fa fa-tags"
            aria-hidden="true"></i>
          
          
  <a href="/tags/#Operating%20system" class='tag'>Operating system</a>

  <a href="/tags/#FreeBSD" class='tag'>FreeBSD</a>


          
        </div>
        <h1 id="FreeBSD-13-Summary"><a href="#FreeBSD-13-Summary" class="headerlink" title="FreeBSD 13 Summary"></a>FreeBSD 13 Summary</h1><h2 id="FreeBSD-Platforms"><a href="#FreeBSD-Platforms" class="headerlink" title="FreeBSD Platforms"></a>FreeBSD Platforms</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/platforms/">https://www.freebsd.org/platforms/</a></li>
</ul>
<table>
<thead>
<tr>
<th>Platform Name</th>
<th>Platform Target</th>
<th>Support Tier</th>
</tr>
</thead>
<tbody><tr>
<td>64-bit x86</td>
<td>amd64</td>
<td>Tier 1</td>
</tr>
<tr>
<td>64-bit ARMv8</td>
<td>aarch64</td>
<td>Tier 1</td>
</tr>
<tr>
<td>32-bit ARMv6</td>
<td>armv6</td>
<td>Tier 2</td>
</tr>
<tr>
<td>32-bit ARMv7</td>
<td>armv7</td>
<td>Tier 2</td>
</tr>
<tr>
<td>32-bit MIPS hard-float</td>
<td>mipshf</td>
<td>Tier 2</td>
</tr>
<tr>
<td>64-bit MIPS hard-float</td>
<td>mips64hf</td>
<td>Tier 2</td>
</tr>
<tr>
<td>64-bit PowerPC</td>
<td>powerpc64,powerpc64le</td>
<td>Tier 2</td>
</tr>
<tr>
<td>64-bit RISC-V</td>
<td>riscv64</td>
<td>Tier 2</td>
</tr>
</tbody></table>
<h2 id="FreeBSD-Documentation"><a href="#FreeBSD-Documentation" class="headerlink" title="FreeBSD Documentation"></a>FreeBSD Documentation</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/releng/">FreeBSD Release Schedule</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.freebsd.org/en/books/handbook/">FreeBSD Handbook</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.freebsd.org/en/books/developers-handbook/">FreeBSD Developers’ Handbook</a></li>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi">FreeBSD Manual Pages</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.freebsd.org/en/articles/committers-guide/">FreeBSD Committer’s Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.freebsd.org/en/books/porters-handbook/">FreeBSD Porter’s Handbook</a></li>
</ul>
<h2 id="FreeBSD-Git-Infrastructure"><a href="#FreeBSD-Git-Infrastructure" class="headerlink" title="FreeBSD Git Infrastructure"></a>FreeBSD Git Infrastructure</h2><p><code>$&#123;repo&#125; can be replaced by doc, ports and src. (*)</code></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cgit.freebsd.org/">FreeBSD Git repositories</a></li>
<li><a target="_blank" rel="noopener" href="https://cgit.freebsd.org/$%7Brepo%7D">https://cgit.freebsd.org/${repo}</a></li>
<li><a target="_blank" rel="noopener" href="https://git.freebsd.org/$%7Brepo%7D.git">https://git.freebsd.org/${repo}.git</a></li>
</ul>
<h2 id="FreeBSD-Download"><a href="#FreeBSD-Download" class="headerlink" title="FreeBSD Download"></a>FreeBSD Download</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/releng/">https://www.freebsd.org/releng/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/where/">https://www.freebsd.org/where/</a></li>
<li><a target="_blank" rel="noopener" href="https://download.freebsd.org/ftp/releases/iso-images/">https://download.freebsd.org/ftp/releases/iso-images/</a></li>
<li><a target="_blank" rel="noopener" href="https://download.freebsd.org/ftp/releases/VM-IMAGES/">https://download.freebsd.org/ftp/releases/VM-IMAGES/</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF | https_proxy=&quot;http://proxy.example.com:8080&quot; aria2c -c -i -</span></span></span><br><span class="line">https://download.freebsd.org/ftp/releases/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-amd64-mini-memstick.img.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-arm-armv6-RPI-B.img.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-arm64-aarch64-mini-memstick.img.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-arm64-aarch64-RPI.img.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-riscv-riscv64-mini-memstick.img.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/VM-IMAGES/13.0-RELEASE/aarch64/Latest/FreeBSD-13.0-RELEASE-arm64-aarch64.qcow2.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/VM-IMAGES/13.0-RELEASE/amd64/Latest/FreeBSD-13.0-RELEASE-amd64.qcow2.xz</span><br><span class="line">https://download.freebsd.org/ftp/releases/VM-IMAGES/13.0-RELEASE/riscv64/Latest/FreeBSD-13.0-RELEASE-riscv-riscv64.qcow2.xz</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h2 id="FreeBSD-Update"><a href="#FreeBSD-Update" class="headerlink" title="FreeBSD Update"></a>FreeBSD Update</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=freebsd-update">https://www.freebsd.org/cgi/man.cgi?query=freebsd-update</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Based on the currently installed world and the configuration options <span class="built_in">set</span>,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">fetch all available binary updates.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> freebsd-update fetch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install the most recently fetched updates or upgrade.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> freebsd-update install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Fetch files necessary <span class="keyword">for</span> upgrading to a new release.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> freebsd-update upgrade</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install the most recently fetched updates or upgrade.</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> freebsd-update install</span></span><br></pre></td></tr></table></figure>

<h2 id="Runtime-Libraries-and-API-Changes"><a href="#Runtime-Libraries-and-API-Changes" class="headerlink" title="Runtime Libraries and API Changes"></a>Runtime Libraries and API Changes</h2><ul>
<li>Removed the <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=cap_random">cap_random(3)</a> function as it has been superseded by <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=getrandom">getrandom(2)</a>.</li>
<li>New <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=aio_readv">aio_readv(2)</a> and <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=aio_writev">aio_writev(2)</a> system calls provide vectored analogues of <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=aio_read">aio_read(2)</a> and <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=aio_write">aio_write(2)</a>.</li>
<li>powerpc64 switched to ELFv2 ABI at the same time it switched to LLVM. This brings us to a parity with modern Linux distributions. This also makes the binaries from previous FreeBSD versions incompatible with 13.0-RELEASE.</li>
</ul>
<h2 id="Kernel-Changes"><a href="#Kernel-Changes" class="headerlink" title="Kernel Changes"></a>Kernel Changes</h2><ul>
<li>The GENERIC kernels for amd64 and i386 now include <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=aesni">aesni(4)</a> to support accelerated software cryptography for <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=geli">geli(8)</a> by default.</li>
<li>The GENERIC kernel for aarch64 now includes <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=armv8crypto">armv8crypto(4)</a> to support accelerated software cryptography for <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=geli">geli(8)</a> by default. Now aarch64 supports AES-XTS and AES-GCM.</li>
<li>Added Safe Memory Reclamation (SMR) to the kernel, a light weight variant of epoch reclamation closely coupled to <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=uma">uma(9)</a>. This has been applied in parts of the VM subsystem and VFS layer to improve scalability on high core count systems.</li>
<li>The suite of VirtIO device drivers now support the VirtIO V1 spec. This improves FreeBSD’s compatibility as a guest operating system with various hypervisors and emulators including the ability to run on the <a target="_blank" rel="noopener" href="https://wiki.qemu.org/images/4/4e/Q35.pdf">Q35 chipset</a> under QEMU.</li>
<li>For <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=iscsi">iscsi(4)</a> and <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=ctld">ctld(8)</a>, support for specifying network QoS in the form of DiffServ Codepoints (DSCP) and Ethernet Priority Code Point (PCP) was added.</li>
<li>The kernel now provides a default implementation for the SEEK_DATA and SEEK_HOLE ioctl(2)’s for filesystems which do not support sparse files.</li>
<li>The NFS client and server now support NFS over TLS. The additional userland daemons are not built by default but can be enabled by building a new world that includes a KTLS-enabled OpenSSL via the WITH_OPENSSL_KTLS option.</li>
<li>A new nfsv4_server_only variable can be set to YES in &#x2F;etc&#x2F;rc.conf to only enable support for NFSv4. This avoids the need to run <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=rpcbind">rpcbind(8)</a> on an NFS server.</li>
<li>The NFS client and server now support NFSv4.2 (RFC 7862) and Extended Attributes (RFC 8276).</li>
<li>The ZFS implementation is now provided by OpenZFS.</li>
<li>Updated the <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=fusefs">fusefs(5)</a> protocol to 7.28 along with adding support for FUSE_COPY_FILE_RANGE and FUSE_LSEEK.</li>
<li>The kernel now supports in-kernel framing and encryption of Transport Layer Security (TLS) data on TCP sockets for TLS versions 1.0 through 1.3. Transmit offload via in-kernel crypto drivers is supported for MtE cipher suites using AES-CBC as well as AEAD cipher suites using AES-GCM. Receive offload via in-kernel crypto drivers is supported for AES-GCM cipher suites for TLS 1.2. Using KTLS requires the use of a KTLS-aware userland SSL library. The OpenSSL library included in the base system does not enable KTLS support by default, but support can be enabled by building with the WITH_OPENSSL_KTLS option.</li>
<li><a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=tcp">tcp(4)</a> now supports Proportional Rate Reduction (as described by RFC6937) to improve SACK loss recovery during burst loss and ACK thinning scenarios. This feature is enabled by default.</li>
<li>Merged the <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=ping">ping(8)</a> and <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=ping6">ping6(8)</a> utilities. <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=ping">ping(8)</a> supports both IPv4 and IPv6.</li>
<li>The amd64 architecture now supports <strong>57-bit</strong> virtual addresses (LA57) on supported CPUs. This permits user processes to use up to** 56 bits of virtual address space**. This also includes support for <strong>five layer nested page tables</strong> used by bhyve.</li>
<li>The 64-bit ARM architecture known as arm64 or AArch64 is promoted to Tier-1 status for FreeBSD 13.</li>
<li>All powerpc architectures switched to LLVM and are currently mostly similar to amd64 toolchain-wise.</li>
<li>powerpc64le (64-bit little endian port) was introduced, targeting POWER8 and newer processors.</li>
<li>The <a target="_blank" rel="noopener" href="https://www.freebsd.org/cgi/man.cgi?query=bhyve">bhyve(8)</a> utility now supports VirtIO-9p (aka VirtFS) filesystem sharing.</li>
</ul>

      </section>
    </article>
    
    
  </div>
  <aside>
    
    <div class="toc-container">
      <h1>
        catalog
      </h1>
      <div class="content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#FreeBSD-13-Summary"><span class="toc-number">1.</span> <span class="toc-text">FreeBSD 13 Summary</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FreeBSD-Platforms"><span class="toc-number">1.1.</span> <span class="toc-text">FreeBSD Platforms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FreeBSD-Documentation"><span class="toc-number">1.2.</span> <span class="toc-text">FreeBSD Documentation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FreeBSD-Git-Infrastructure"><span class="toc-number">1.3.</span> <span class="toc-text">FreeBSD Git Infrastructure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FreeBSD-Download"><span class="toc-number">1.4.</span> <span class="toc-text">FreeBSD Download</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FreeBSD-Update"><span class="toc-number">1.5.</span> <span class="toc-text">FreeBSD Update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Runtime-Libraries-and-API-Changes"><span class="toc-number">1.6.</span> <span class="toc-text">Runtime Libraries and API Changes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kernel-Changes"><span class="toc-number">1.7.</span> <span class="toc-text">Kernel Changes</span></a></li></ol></li></ol>
      </div>
    </div>
    
  </aside>
</main>



  <footer>
  <div class="copyright">
    <div>
      &copy;
      2024 | Powered by <a href="https://hexo.io"
        target="_blank">Hexo</a>&nbsp
    </div>
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath"
        target="_blank">Aath</a>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<script src="/lib/ScrollMagic.min.js"></script>


<script src="/lib/lodash.min.js"></script>

<script>
  document.body.addEventListener('touchstart', function () { });

  // 文章图片预览
  $("article img").each(function () {
    var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
    $(this).wrapAll(strA);
  });

  // 目录联动
  let tocLinkList = $('.toc-link')

  let controller = new ScrollMagic.Controller({
    globalSceneOptions: {
      triggerHook: 0.01
    }
  })

  tocLinkList.each(function (index, elem) {
    let href = $(this).attr("href");
    let nextHref = tocLinkList.eq(index + 1).attr("href");
    let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

    new ScrollMagic.Scene({ triggerElement: href })
      .duration(height)
      .setClassToggle(".toc [href='" + href + "']", 'active')
      .addTo(controller)
  })

  window.addEventListener('load', function () {
    // 目录联动 图片加载完成后从新计算
    tocLinkList.each(function (index, elem) {
      let href = $(this).attr("href");
      let nextHref = tocLinkList.eq(index + 1).attr("href");
      let height = href && nextHref ? $(nextHref).offset().top - $(href).offset().top : 0

      new ScrollMagic.Scene({ triggerElement: href })
        .duration(height)
        .setClassToggle(".toc [href='" + href + "']", 'active')
        .addTo(controller)
    })
  })
</script>

<script src="/lib/jquery.fancybox.min.js"></script>



</body>
</html>
